\documentclass{book}

\title{Mathematics}
\author{Robin Adams}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\let\proof\relax
\let\endproof\relax
\let\qed\relax
\usepackage{pf2}
\usepackage{hyperref}
\usepackage{mathabx}

\newtheorem{ax}{Axiom}[chapter]
\newtheorem{prop}[ax]{Proposition}
\newtheorem{cor}{Corollary}[ax]
\newtheorem{thm}[ax]{Theorem}
\newtheorem{lm}[ax]{Lemma}
\theoremstyle{definition}
\newtheorem{df}[ax]{Definition}
\newtheorem{ex}[ax]{Example}

\newcommand{\id}[1]{\ensuremath{\mathrm{id}_{#1}}}
\newcommand{\inv}[1]{\ensuremath{{#1}^{-1}}}

\begin{document}

\maketitle
\tableofcontents

\chapter{Primitive Notions and Axioms}

Let there be \emph{sets}.

Given sets $A$ and $B$, let there be \emph{functions} from $A$ to $B$. We write $f : A \rightarrow B$ for '$f$ is a function from $A$ to $B$'. We call $A$ the \emph{domain} of $A$, and $B$ the \emph{codomain}.

Given sets $A$, $B$ and $C$, and functions $f : A \rightarrow B$ and $g : B \rightarrow C$, let there be a function $gf = g \circ f : A \rightarrow C$, the \emph{composite} of $f$ and $g$.

\begin{ax}[Associativity]
For any functions $f : A \rightarrow B$, $g : B \rightarrow C$ and $h : C \rightarrow D$, we have
\[ h \circ (g \circ f) = (h \circ g) \circ f \enspace . \]
\end{ax}

\begin{ax}[Identity]
For any set $A$, there exists a function $\id{A} : A \rightarrow A$, called an \emph{identity} function on $A$, such that:
\begin{itemize}
\item for every set $B$ and function $f : A \rightarrow B$, we have $f \circ \id{A} = f$;
\item for every set $B$ and function $f : B \rightarrow A$, we have $\id{A} \circ f = f$.
\end{itemize}
\end{ax}

\begin{prop}
The identity function on a set is unique.
\end{prop}

\begin{proof}
\pf\ If $i, j : A \rightarrow A$ are identity functions on $A$ then we have $i = i \circ j = j$. \qed
\end{proof}

\begin{df}[Isomorphism]
A function $i : A \rightarrow B$ is an \emph{isomorphism}, $i : A \cong B$, iff there exists a function $\inv{i} : B \rightarrow A$, the \emph{inverse} of $i$, such that $\inv{i} \circ i = \id{A}$ and $i \circ \inv{i} = \id{B}$.
\end{df}

\begin{ax}[Terminal Set]
There exists a set 1 such that, for any set $A$, there exists a unique function $A \rightarrow 1$.
\end{ax}

\begin{prop}
The terminal set is unique up to unique isomorphism.
\end{prop}

\begin{proof}
\pf
\step{1}{\pflet{$A$ and $B$ be terminal sets.}}
\step{2}{\pflet{$i$ be the unique function $A \rightarrow B$.}}
\step{3}{\pflet{$\inv{i}$ be the unique function $B \rightarrow A$.}}
\step{4}{$i \circ \inv{i} = \id{B}$}
\begin{proof}
	\pf\ Since there is only one function $B \rightarrow B$.
\end{proof}
\step{5}{$\inv{i} \circ i = \id{A}$}
\begin{proof}
	\pf\ Since there is only one function $A \rightarrow A$.
\end{proof}
\qed
\end{proof}

\begin{df}[Element]
For any set $A$, an \emph{element} of $A$ is a function $1 \rightarrow A$.

We write $a \in A$ for $a : 1 \rightarrow A$. Given $f : A \rightarrow B$ and $a \in A$, we write $f(a)$ for $f \circ a$.
\end{df}

\begin{ax}[Extensionality]
Let $A$ and $B$ be sets. Let $f,g : A \rightarrow B$. If, for all $x \in A$, we have $f(x) = g(x)$, then $f = g$.
\end{ax}

\begin{ax}[Empty Set]
There exists a set with no elements.
\end{ax}

\begin{ax}[Products]
Let $A$ and $B$ be sets. There exists a set $A \times B$ and functions $\pi_1 : A \times B \rightarrow A$, $\pi_2 : A \times B \rightarrow B$, the \emph{projections}, such that, for every set $X$ and functions $f : X \rightarrow A$, $g : X \rightarrow B$, there exists a unique function $\langle f,g \rangle : X \rightarrow A \times B$ such that
\[ \pi_1 \circ \langle f,g \rangle = f, \qquad \pi_2 \circ \langle f,g \rangle = g \enspace . \]
\end{ax}

\begin{prop}
If $\pi_1 : P \rightarrow A$ and $\pi_2 : P \rightarrow B$ form a product of $A$ and $B$, and $p_1 : Q \rightarrow A$ and $p_2 : Q \rightarrow B$ form a product of $A$ and $B$, then there exists a unique isomorphism $i : P \cong Q$ such that $p_1 \circ i = \pi_1$ and $p_2 \circ i = \pi_2$.
\end{prop}

\begin{proof}
\pf
\step{1}{\pflet{$i : P \rightarrow Q$ be the unique function such that $p_1 \circ i = \pi_1$ and $p_2 \circ i = \pi_2$.}}
\step{2}{\pflet{$\inv{i} : Q \rightarrow P$ be the unique function such that $\pi_1 \circ \inv{i} = p_1$ and $\pi_2 \circ \inv{i} = p_2$}}
\step{3}{$i \circ \inv{i} = \id{Q}$}
\begin{proof}
	\pf\ Each is the unique $x : Q \rightarrow Q$ such that $p_1 \circ x = p_1$ and $p_2 \circ x = p_2$.
\end{proof}
\step{4}{$\inv{i} \circ i = \id{P}$}
\begin{proof}
	\pf\ Each is the unique $x : P \rightarrow P$ such that $\pi_1 \circ x = \pi_1$ and $\pi_2 \circ x = \pi_2$.
\end{proof}
\qed
\end{proof}

\begin{ax}[Function Sets]
Let $A$ and $B$ be sets. There exists a set $A^B$ and function $\epsilon : A^B \times B \rightarrow A$ such that, for any set $X$ and function $f : X \times B \rightarrow A$, there exists a unique function $\lambda f : X \rightarrow A^B$ such that
\[ f = \epsilon \circ \langle \lambda f \circ \pi_1, \pi_2 \rangle \enspace . \]
\end{ax}

\begin{df}[Inverse Image]
Let $A$, $X$ and $Y$ be sets. Let $f : X \rightarrow Y$, $a \in Y$ and $j : A \rightarrow X$. Then $j$ is the \emph{inverse image} of $a$ under $f$ if and only if:
\begin{itemize}
\item $f \circ j = a \circ !_A$
\item for every set $I$ and function $q : I \rightarrow X$ such that $f \circ q = a \circ !_I$, there exists a unique $\overline{q} : I \rightarrow A$ such that $q = j \circ \overline{q}$.
\end{itemize}
\end{df}

\begin{ax}[Inverse Images]
For any sets $X$ and $Y$, function $f : X \rightarrow Y$ and element $a \in Y$, there exists a set $f^{-1}(a)$ and function $j : f^{-1}(a) \rightarrow X$ such that $j$ is the inverse image of $a$ under $f$.
\end{ax}

\begin{df}[Injective]
A function $f : A \rightarrow B$ is \emph{injective} iff, for every set $X$ and functions $x,y : X \rightarrow A$, if $f \circ x = f \circ y$ then $x = y$.
\end{df}

\begin{df}[Surjective]
A function $f : A \rightarrow B$ is \emph{surjective} iff, for every set $X$ and functions $x,y : B \rightarrow X$, if $x \circ f = y \circ f$ then $x = y$.
\end{df}

\begin{ax}[Subset Classifier]
There exists a set 2 and function $\top : 1 \rightarrow 2$ such that, for every injective function $f : A \rightarrow X$, there exists a unique function $\chi : X \rightarrow 2$ such that $f$ is the inverse image of $\top$ under $\chi$.
\end{ax}

\begin{ax}[Natural Numbers]
There exists a set $\mathbb{N}$, an element $0 \in \mathbb{N}$ and a function $s : \mathbb{N} \rightarrow \mathbb{N}$ such that, for every set $X$, element $a \in X$ and function $r : X \rightarrow X$, there exists a unique function $x : \mathbb{N} \rightarrow X$ such that $x \circ 0 = a$ and $x \circ s = r \circ x$.
\end{ax}

\begin{ax}[Choice]
For every surjective function $r : X \rightarrow Y$, there exists $s : Y \rightarrow X$ such that $r \circ s$ is an identity function on $X$.
\end{ax}

\end{document}