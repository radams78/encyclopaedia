\documentclass{book}

\title{Mathematics}
\author{Robin Adams}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\let\proof\relax
\let\endproof\relax
\let\qed\relax
\usepackage{pf2}
\usepackage{hyperref}
\usepackage{mathabx}
\usepackage[all]{xy}

\newtheorem{ax}{Axiom}[chapter]
\newtheorem{prop}[ax]{Proposition}
\newtheorem{cor}{Corollary}[ax]
\newtheorem{thm}[ax]{Theorem}
\newtheorem{lm}[ax]{Lemma}
\theoremstyle{definition}
\newtheorem{df}[ax]{Definition}
\newtheorem{ex}[ax]{Example}

\newcommand{\id}[1]{\ensuremath{\mathrm{id}_{#1}}}
\newcommand{\inv}[1]{\ensuremath{{#1}^{-1}}}

\begin{document}

\maketitle
\tableofcontents

\chapter{Sets and Functions}

\section{Primitive Terms}

Let there be \emph{sets}.

Given sets $A$ and $B$, let there be \emph{functions} from $A$ to $B$. We write $f : A \rightarrow B$ iff $f$ is a function from $A$ to $B$, and call $A$ the \emph{domain} of $f$ and $B$ the \emph{codomain}.

Given functions $f : A \rightarrow B$ and $g : B \rightarrow C$, let there be a function $g \circ f : A \rightarrow C$, the \emph{composite} of $f$ and $g$.

For any set $A$, let there be a function $\id{A} : A \rightarrow A$, the \emph{identity} function on $A$.

Let there be a set 1, the \emph{terminal} set.

For any sets $A$ and $B$, let there be a set $A \times B$, the \emph{product} of $A$ and $B$, and functions $\pi_1 : A \times B \rightarrow A$, $\pi_2 : A \times B \rightarrow B$, the \emph{projections}.

Given functions $f : A \rightarrow B$ and $g : A \rightarrow C$, let there be a function $\langle f,g \rangle : A \rightarrow B, C$.

\section{Definitions Used in the Axioms}

\begin{df}[Injective]
A function $f : A \rightarrow B$ is \emph{injective} iff, for every set $X$ and functions $x,y : X \rightarrow A$, if $fx = fy$ then $x = y$.
\end{df}

\begin{df}[Element]
For any set $A$, an \emph{element} of $A$ is a function $1 \rightarrow a$. We write $a \in A$ for $a : 1 \rightarrow A$.

Given $f : A \rightarrow B$ and $a \in A$, we write $f(a)$ for $f \circ a : 1 \rightarrow B$.
\end{df}

\begin{df}[Surjective]
A function $f : A \rightarrow B$ is \emph{surjective} iff, for every element $b \in B$, there exists $a \in A$ such that $f(a) = b$.
\end{df}

\begin{df}
Given functions $f : A \rightarrow B$ and $g : C \rightarrow D$, let $f \times g = \langle f \circ \pi_1, g \circ \pi_2 \rangle$.
\end{df}

\begin{df}[Function Set]
Let $A$ and $B$ be sets. A \emph{function set} from $A$ to $B$ consists of a set $B^A$ and function $\epsilon : B^A \times A \rightarrow B$ such that, for any set $I$ and function $q : I \times A \rightarrow B$, there exists a unique function $\lambda q : I \rightarrow B^A$ such that $\epsilon \circ (\lambda q \times \id{A}) = q$.
\end{df}

\begin{df}[Pullback]
Let $p : A \rightarrow B$, $q : A \rightarrow C$, $f : B \rightarrow D$ and $g : C \rightarrow D$. Then we say that $A$, $p$ and $q$ form the \emph{pullback} of $f$ and $g$ if and only if:
\begin{itemize}
\item $fp = gq$
\item For any set $X$ and functions $x : X \rightarrow B$, $y : X \rightarrow C$ such that $fx = gy$, there exists a unique function $(x,y) : X \rightarrow A$ such that $p (x,y) = x$ and $q(x,y) = y$.
\end{itemize}
We also say $p$ is the pullback of $g$ along $f$, or $q$ is the pullback of $f$ along $g$.

In the case $g$ is injective, we also say $A$ and $p$ form the \emph{inverse image} of $g$ under $f$.
\end{df}

\[ \xymatrix{
A \ar[r]^p \ar[d]_q & B \ar[d]^f \\
C \ar[r]_g & D
} \]

\section{The Axioms}

\begin{ax}[Associativity]
Given $f : A \rightarrow B$, $g : B \rightarrow C$ and $h : C \rightarrow D$, we have
\[ h (gf) = (hg) f \enspace . \]
\end{ax}

\begin{ax}[Unit Laws]
For any function $f : A \rightarrow B$, we have $\id{B} \circ f = f \circ \id{A} = f$.
\end{ax}

\begin{ax}[Terminal Set]
For any set $X$, there is exactly one function $X \rightarrow 1$.
\end{ax}

\begin{ax}[Empty Set]
There exists a set that has no elements.
\end{ax}

\begin{ax}[Extensionality]
Let $A$ and $B$ be sets and $f,g : A \rightarrow B$.
If $\forall a \in A. f(a) = g(a)$ then $f = g$. \end{ax}

\begin{ax}[Products]
Let $f : A \rightarrow B$ and $g : A \rightarrow C$. Then $\langle f,g \rangle$ is the unique function $A \rightarrow B \times C$ such that
\[ \pi_1 \circ \langle f,g \rangle = f, \qquad \pi_2 \circ \langle f,g \rangle = g \enspace . \]
\end{ax}

\begin{ax}[Function Sets]
Any two sets have a function set.
\end{ax}

\begin{ax}[Inverse Images]
Given any function $f : X \rightarrow Y$ and element $y \in Y$, then there exists a pullback of $f$ and $y$.
\end{ax}

\begin{ax}[Subset Classifier]
There exists a set $2$ and element $\top \in 2$ such that, for any sets $A$ and $X$ and injective function $j : A \rightarrowtail X$, there exists a unique function $\chi : X \rightarrow 2$ such that $j$ and the unique function $A \rightarrow 1$ form the pullback of $\top$ and $\chi$.
\end{ax}

\begin{ax}[Natural Numbers Set]
There exists a set $\mathbb{N}$, an element $0 \in \mathbb{N}$ and a function $s : \mathbb{N} \rightarrow \mathbb{N}$ such that, for any set $A$, element $a \in A$ and function $f : A \rightarrow A$, there exists a unique function $r : \mathbb{N} \rightarrow A$ such that $r(0) = a$ and $f \circ r = r \circ s$.
\end{ax}

\begin{ax}[Choice]
For any surjective function $r : A \rightarrow B$, there exists $s : B \rightarrow A$ such that $rs = \id{B}$.
\end{ax}

\section{Functions}

\begin{prop}
Let $f : A \rightarrow B$, $g : B \rightarrow C$ and $a \in A$. Then
\[ (g \circ f)(a) = g(f(a)) \enspace . \]
\end{prop}

\begin{proof}
\pf\ Immediate from the Axiom of Associativity. \qed
\end{proof}

\end{document}