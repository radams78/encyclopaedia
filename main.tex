\documentclass{book}
\title{Mathematics}
\author{Robin Adams}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\let\proof\relax
\let\endproof\relax
\let\qed\relax
\usepackage{pf2}
\usepackage{tikz-cd}

\newtheorem{ax}{Axiom}
\newtheorem{prop}{Proposition}[chapter]
\newtheorem{thm}[prop]{Theorem}
\newtheorem{lm}[prop]{Lemma}
\newtheorem{cor}{Corollary}[prop]
\theoremstyle{definition}
\newtheorem{df}[prop]{Definition}
\newtheorem{ex}[prop]{Example}

\newcommand{\Ab}{\ensuremath{\mathbf{Ab}}}
\newcommand{\Alg}[1]{\ensuremath{{#1}-\mathbf{Alg}}}
\newcommand{\Aut}[2]{\ensuremath{\mathrm{Aut}_{#1} \left( {#2} \right)}}
\newcommand{\coker}{\ensuremath{\operatorname{coker}}}
\newcommand{\End}[2]{\ensuremath{\mathrm{End}_{#1} \left( {#2} \right)}}
\newcommand{\Fab}[1]{\ensuremath{F^{\mathrm{ab}} \left( {#1} \right)}}
\newcommand{\gl}[2]{\ensuremath{\mathfrak{gl}_{#1} \left( {#2} \right)}}
\newcommand{\Grp}{\ensuremath{\mathbf{Grp}}}
\newcommand{\id}[1]{\ensuremath{\mathrm{id}_{#1}}}
\newcommand{\im}{\ensuremath{\operatorname{im}}}
\newcommand{\Inn}[1]{\ensuremath{\mathrm{Inn} \left( {#1} \right)}}
\newcommand{\inv}[1]{\ensuremath{{#1}^{-1}}}
\newcommand{\lcm}{\ensuremath{\operatorname{lcm}}}
\renewcommand{\mod}{\ensuremath{\operatorname{mod}}}
\newcommand{\Mod}[1]{\ensuremath{{#1}-\mathbf{Mod}}}
\newcommand{\Ring}{\ensuremath{\mathbf{Ring}}}
\newcommand{\Set}{\ensuremath{\mathbf{Set}}}
\newcommand{\SL}[2]{\ensuremath{\mathrm{SL}_{#1} \left( {#2} \right)}}
\renewcommand{\sl}[2]{\ensuremath{\mathfrak{sl}_{#1} \left( {#2} \right)}}
\newcommand{\so}[2]{\ensuremath{\mathfrak{so}_{#1} \left( {#2} \right)}}
\newcommand{\Spec}{\ensuremath{\operatorname{Spec}}}
\newcommand{\Stab}[2]{\ensuremath{\mathrm{Stab}_{#1} \left( {#2} \right)}}
\newcommand{\tr}{\ensuremath{\operatorname{tr}}}

\begin{document}

\maketitle
\tableofcontents

% Definition
% Examples
% Basic Properties
% Relation with Previous Concepts
% Ways of Constructing X
% Special Kinds

\part{Category Theory}

\input{categories}

\part{Number Theory}

\begin{df}[Partition]
A \emph{partition} of a natural number $n$ is a nonincreasing sequence of positive integers whose sum is $n$.
\end{df}

\part{Order Theory}

\chapter{Boolean Algebras}

\begin{df}[Boolean Algebra]
A \emph{Boolean algebra} $B$ is a lattice %TODO Define this
with a function $\neg : B \rightarrow B$ such that, for all $a,b \in B$, we have
\begin{align*}
a \leq \neg b & \text{ iff } a \wedge b = \bot \\
\neg \neg a & = a
\end{align*}
\end{df}

\begin{ex}
For any set $A$, the power set $\mathcal{P} A$ is a Boolean algebra under inclusion, with $\neg X = A - X$.
\end{ex}

\begin{df}[Boolean Algebra Homomorphism]
Given Boolean algebras $B$ and $B'$, a \emph{Boolean algebra homomorphism} $h : B \rightarrow B'$ is a lattice homomorphism such that
\[ \forall x \in B. h(\neg x) = \neg h(x) \enspace . \]
Let $\mathbf{BA}$ be the category of Boolean algebras and Boolean algebra homomorphisms.
\end{df}

\begin{ex}
$\mathbf{2} = \mathcal{P} \mathbf{1}$ is initial in $\mathbf{BA}$.
\end{ex}

\begin{df}[Filter]
Let $B$ be a Boolean algebra. A \emph{filter} in $B$ is a subset $F \subseteq B$ that is closed upwards and closed under binary meets.
\end{df}

\begin{df}[Maximal Filter]
A filter $F$ in $B$ is \emph{maximal} or an \emph{ultrafilter} iff $F \neq B$ and, for any filter $F'$, if $F \subseteq F'$ then either $F = F'$ or $F' = B$.
\end{df}

\begin{prop}
Let $F$ be a filter in $B$. Then $F$ is an ultrafilter iff, for all $x \in B$, exactly one of $x \in F$ and $\neg x \in F$ holds.
\end{prop}

\begin{proof}
\pf
\step{1}{If $F$ is an ultrafilter then, for all $x \in B$, we have either $x \in F$ or $\neg x \in F$.}
\begin{proof}
	\step{a}{\assume{$F$ is an ultrafilter.}}
	\step{b}{\pflet{$x \in B$}}
	\step{c}{\pflet{$F' = \{y \in B \mid \neg x \vee y \in F \}$}}
	\step{d}{$F \subseteq F'$}
	\step{e}{$F' = F$ or $F' = B$}
	\step{f}{\case{$F' = F$}}
	\begin{proof}
		\pf\ We have $x \in F'$ hence $x \in B$.
	\end{proof}
	\step{g}{\case{$F' = B$}}
	\begin{proof}
		\pf\ We have $\bot \in F'$ hence $\neg x \vee \bot \in F$ and so $\neg x \in F$.
	\end{proof}
\end{proof}
\step{2}{If $F$ is an ultrafilter then we do not have $x \in F$ and $\neg x \in F$.}
\begin{proof}
	\pf\ If $x \in F$ and $\neg x \in F$ then $\bot \in F$ hence $F = B$.
\end{proof}
\step{3}{If, for all $x \in B$, we have exactly one of $x \in F$ and $\neg x \in F$ holds, then $F$ is an ultrafilter.}
\begin{proof}
	\step{a}{\assume{For all $x \in B$, we have exactly one of $x \in F$ and $\neg x \in F$ holds.}}
	\step{b}{\pflet{$F'$ be a filter with $F \subset F'$.} \prove{$F' = B$}}
	\step{c}{\pick\ $x \in F' - F$}
	\step{d}{$\neg x \in F$}
	\step{e}{$x, \neg x \in F'$}
	\step{f}{$F' = B$}
\end{proof}
\qed
\end{proof}

\part{Group Theory}

\input{groups}

\part{Ring Theory}

\input{rings}

\part{Linear Algebra}

\chapter{Vector Spaces}

\begin{df}[Vector Space]
Let $K$ be a field. A \emph{vector space} over $K$ is a module over $K$. A \emph{linear transformation} is a $K$-module homomorphism.
\end{df}

\begin{df}[Bilinear Map]
Let $K$ be a field. Let $U$, $V$ and $W$ be vector spaces over $K$. A function $f : U \times V \rightarrow W$ is \emph{bilinear} iff, for all $u_1, u_2 \in U$ and $v_1,v_2 \in V$ and $\alpha \in K$,
\begin{align*}
f(u_1 + \alpha u_2, v_1) & = f(u_1,v_1) + \alpha f(u_2,v_1) \\
f(u_1, v_1 + \alpha v_2) & = f(u_1,v_1) + \alpha f(u_1,v_2)
\end{align*}
\end{df}

\begin{thm}
Let $K$ be a field. Let $U$ and $V$ be vector spaces. There exists a vector space $U \otimes V$ over $K$ and bilinear map $- \otimes - : U \times V \rightarrow U \otimes V$, unique up to isomorphism, such that, for every vector space $W$ over $K$ and bilinear map $f : U \times V \rightarrow W$, there exists a unique linear map $\overline{f} : U \otimes V \rightarrow W$ such that the following diagram commutes.
\[ \begin{tikzcd}
U \otimes V \arrow[r,"\overline{f}"] & W \\
U \times V \arrow[u,"- \otimes -"] \arrow[ur,"f"]
\end{tikzcd} \]
Further, $- \otimes -$ is injective and its image spans $U \otimes V$.
\end{thm}

\begin{proof}
\pf\ We can construct $U \otimes V$ as follows. Let $L$ be the free vector space generated by $U \times V$. Let $R$ be the subspace generated by all vectors of the form
\begin{equation*}
(u_1 + \alpha u_2, v) - (u_1,v) - \alpha (u_2,v) \\
(u, v_1 + \alpha v_2) - (u,v_1) - \alpha (u,v_2)
\end{equation*}
Take $U \otimes V := L / R$. \qed
\end{proof}

\begin{prop}
\label{prop:linearly-disjoint}
If $\sum_{i=1}^n u_i \otimes v_i = 0$ and $v_1$, \ldots, $v_n$ are linearly independent in $V$ then $u_1 = \cdots = u_n = 0$.
\end{prop}

\begin{proof}
\pf
\step{1}{\pflet{$f : U \times V \rightarrow V^{U^*}$ be the function $f(u,v)(\Phi) = \Phi(u)v$}}
\step{2}{$f$ is bilinear.}
\step{3}{\pflet{$\overline{f} : U \otimes V \rightarrow V^{U^*}$ be the induced linear transformation.}}
\step{4}{$\overline{f}(\sum_{i=1}^n u_i \otimes v_i) = 0$}
\step{5}{$\sum_{i=1}^n f(u_i,v_i) = 0$}
\step{6}{For all $\Phi \in U^*$ we have $\sum_{i=1}^n \Phi(u_i) v_i = 0$}
\step{7}{For all $\Phi \in U^*$ we have $\Phi(u_1) = \cdots = \Phi(u_n) = 0$}
\step{8}{$u_1 = \cdots = u_n = 0$}
\qed
\end{proof}

\begin{prop}
Let $U$ and $V$ be vector spaces over $K$ with bases $\mathcal{B}_1$ and $\mathcal{B}_2$. Then $\mathcal{B} = \{ b_1 \otimes b_2 : b_1 \in \mathcal{B}_1, b_2 \in \mathcal{B}_2 \}$ is a basis for $U \otimes V$.
\end{prop}

\begin{proof}
\pf
\step{1}{$\mathcal{B}$ is linearly independent.}
\begin{proof}
	\step{a}{\assume{$\sum_{i=1}^m \sum_{j=1}^n \alpha_{ij} b_i \otimes b_j' = 0$}}
	\step{b}{For all $j$ we have $\sum_{i=1}^m \alpha_{ij} b_i = 0$}
	\begin{proof}
		\pf\ Proposition \ref{prop:linearly-disjoint}.
	\end{proof}
	\step{c}{Each $\alpha_{ij}$ is 0.}
\end{proof}
\step{2}{$\mathcal{B}$ spans $U \otimes V$.}
\begin{proof}
	\pf\ If $u = \alpha_1 b_1 + \cdots + \alpha_m b_m$ and $v = \beta_1 b_1' + \cdots + \beta_n b_n'$ then
	\[ u \otimes v = \sum_{i=1}^m \sum_{j=1}^n \alpha_i \beta_j (b_i \otimes b_j') \]
	The result follows since the vectors of the form $u \otimes v$ span $U \otimes V$.
\end{proof}
\qed
\end{proof}

\begin{cor}
If $U$ and $V$ are finite dimensional vector spaces over $K$ then
\[ \dim (U \otimes V) = (\dim U)(\dim V) \enspace . \]
\end{cor}

\begin{prop}
$\mathbf{Vect}_K$ is a symmetric monoidal category under $\otimes$.
\end{prop}

\part{Measure Theory}

\begin{df}[$\sigma$-algebra]
Let $X$ be a set. A \emph{$\sigma$-algebra} on $X$ is a nonempty set $\Sigma \subseteq \mathcal{P} X$ that is closed under complement, countable union, and countable intersection.

A \emph{measurable space} consists of a set with a $\sigma$-algebra.
\end{df}

\begin{df}[Measure]
Let $(X, \sigma)$ be a measurable space. A \emph{measure} on $(X, \sigma)$ is a function $\mu : \Sigma \rightarrow \mathbb{R}_{\geq 0} \cup \{ + \infty \}$ such that:
\begin{itemize}
\item $\mu(\emptyset) = 0$
\item For any countable set of pairwise disjoint sets $\{ E_n : n \in \mathbb{N} \}$ in $\Sigma$,
\[ \mu \left( \bigcup_{n=0}^\infty E_n \right) = \sum_{n=0}^\infty \mu(E_n) \enspace . \]
\end{itemize}
\end{df}

\end{document}
