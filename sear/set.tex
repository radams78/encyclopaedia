\chapter{Primitive Terms and Axioms}

\section{Primitive Terms} % CHECKED FORMALIZED

Let there be \emph{sets}.

For any set $A$, let there be \emph{elements} of $A$. We write $a \in A$ for: $a$ is an element of $A$.

For any sets $A$ and $B$, let there be a set $B^A$, whose elements are called \emph{functions} from $A$ to $B$. We write $f : A \rightarrow B$ for $f \in B^A$.

For any function $f : A \rightarrow B$ and element $a \in A$, let there be an element $f(a) \in B$, the \emph{value} of the function $f$ at the \emph{argument} $a$.

\section{Injections, Surjections and Bijections} % CHECKED FORMALIZED

\begin{df}[Injective]
A function $f : A \rightarrow B$ is \emph{injective} or an \emph{injection} iff, for all $x,y \in A$, if $f(x) = f(y)$ then $x = y$.
\end{df}

\begin{df}[Surjective]
A function $f : A \rightarrow B$ is \emph{surjective} or a \emph{surjection} iff, for all $y \in B$, there exists $x \in A$ such that $f(x) = y$.
\end{df}

\begin{df}[Bijective]
A function $f : A \rightarrow B$ is \emph{bijective} or a \emph{bijection} iff it is injective and surjective.

Sets $A$ and $B$ are \emph{equinumerous}, $A \approx B$, iff there exists a bijection between them.
\end{df}

If we prove there exists a set $X$ such that $P(X)$, and that any two sets that satisfy $P$ are bijective, then we may introduce a constant $C$ and define "Let $C$ be the set such that $P(C)$".

\section{Axioms} % CHECKED FORMALIZED

\begin{axs}[Choice]
Let $P[X,Y,x,y]$ be a formula where $X$ and $Y$ are set variables, $x \in X$ and $y \in Y$. Then the following is an axiom.

Let $A$ and $B$ be sets. Assume that, for all $a \in A$, there exists $b \in B$ such that $P[A,B,a,b]$. Then there exists a function $f : A \rightarrow B$ such that $\forall a \in A. P[A,B,a,f(a)]$.
\end{axs}

\begin{ax}[Extensionality]
Let $f, g : A \rightarrow B$. If, for all $x \in A$, we have $f(x) = g(x)$, then $f = g$.
\end{ax}

\begin{df}[Composition]
Let $f : A \rightarrow B$ and $g : B \rightarrow C$. The \emph{composite} $g \circ f : A \rightarrow C$ is the function such that, for all $a \in A$, we have
\[ (g \circ f)(a) = g(f(a)) \enspace . \]
\end{df}

\begin{ax}[Pairing]
For any sets $A$ and $B$, there exists a set $A \times B$, the \emph{Cartesian product} of $A$ and $B$, and functions $\pi_1 : A \times B \rightarrow A$ and $\pi_2 : A \times B \rightarrow B$ such that, for all $a \in A$ and $b \in B$, there exists a unique $(a,b) \in A \times B$ such that $\pi_1(a,b) = a$ and $\pi_2(a,b) = b$.
\end{ax}

\begin{axs}[Separation]
For every property $P[X,x]$ where $X$ is a set variable and $x \in X$, the following is an axiom:

For every set $A$, there exists a set $S = \{ x \in A : P[A,x] \}$ and an injection $i : S \rightarrow A$ such that, for all $x \in A$, we have
\[ (\exists y \in S. i(y) = x) \Leftrightarrow P[A,x] \enspace . \]
\end{axs}

\begin{ax}[Infinity]
There exists a set $\mathbb{N}$, an element $0 \in \mathbb{N}$, and a function $s : \mathbb{N} \rightarrow \mathbb{N}$ such that:
\begin{itemize}
\item $\forall n \in \mathbb{N}. s(n) \neq 0$
\item $\forall m,n \in \mathbb{N}. s(m) = s(n) \Rightarrow m = n$.
\end{itemize}
\end{ax}

\begin{axs}[Collection]
Let $P[X,Y,x]$ be a formula with set variables $X$ and $Y$ and an element variable $x \in X$. Then the following is an axiom.

For any set $A$, there exist sets $B$ and $Y$ and functions $p : B \rightarrow A$, and $m : B \times Y \Rightarrow \mathbb{N}$ such that:
\begin{itemize}
\item $m$ is injective.
\item $\forall b \in B. P[A, \{ y \in Y : m(b,y) = 0 \}, p(b)]$
\item For all $a \in A$, if $\exists Y. P[A,Y,a]$, then there exists $b \in B$ such that $a = p(b)$.
\end{itemize}
\end{axs}

\begin{ax}[Universe]
There exists a set $E$, a set $U$ and a function $el : E \rightarrow U$ such that the following holds.

Let us say that a set $A$ is \emph{small} iff there exists $u \in U$ such that $A \approx \{ e \in E : el(e) = u \}$.

\begin{itemize}
\item $\mathbb{N}$ is small.
\item For any $U$-small sets $A$ and $B$, the set $B^A$ is small.
\item For any $U$-small sets $A$ and $B$, the set $A \times B$ is small.
\item Let $f : A \rightarrow B$ be a function. If $B$ is small and $\{ a \in A : f(a) = b \}$ is small for all $b \in B$, then $A$ is small.
\item If $p : B \twoheadrightarrow A$ is a surjective function such that $A$ is small, then there exists a $U$-small set $C$, a surjection $q : C \twoheadrightarrow A$, and a function $f : C \rightarrow B$ such that $q = p \circ f$.
\end{itemize}
\end{ax}

\chapter{Sets and Functions}

\section{Composition} % CHECKED

\begin{prop}
Given functions $f : A \rightarrow B$, $g : B \rightarrow C$ and $h : C \rightarrow D$, we have
\[ h \circ (g \circ f) = (h \circ g) \circ f \enspace . \]
\end{prop}

\begin{proof}
\pf
\step{1}{For all $x \in A$ we have $(h \circ (g \circ f))(x) = ((h \circ g) \circ f)(x)$.}
\begin{proof}
	\step{a}{\pflet{$x \in A$}}
	\step{b}{$(h \circ (g \circ f))(x) = ((h \circ g) \circ f)(x)$}
	\begin{proof}
		\pf
		\begin{align*}
			(h \circ (g \circ f))(x)
			& = h ((g \circ f)(x)) & (\text{Definition of composition}) \\
			& = h(g(f(x))) & (\text{Definition of composition}) \\
			& = (h \circ g)(f(x)) & (\text{Definition of composition}) \\
			& = ((h \circ g) \circ f)(x) & (\text{Definition of composition})
		\end{align*}
	\end{proof}
\end{proof}
\qedstep
\begin{proof}
	\pf\ By the Axiom of Extensionality.
\end{proof}
\qed
\end{proof}

\section{Injections} % CHECKED FORMALIZED

\begin{prop}
\label{prop:inj_comp}
The composite of injective functions is injective.
\end{prop}

\begin{proof}
\pf
\step{1}{\pflet{$A$, $B$ and $C$ be sets.}}
\step{2}{\pflet{$f : A \rightarrow B$}}
\step{3}{\pflet{$g : B \rightarrow C$}}
\step{4}{\assume{$g$ is injective.}}
\step{5}{\assume{$f$ is injective.}}
\step{6}{\pflet{$x,y \in A$}}
\step{7}{\assume{$(g \circ f)(x) = (g \circ f)(y)$} \prove{$x = y$}}
\step{8}{$g(f(x)) = g(f(y))$}
\begin{proof}
	\pf
	\begin{align*}
		g(f(x)) & = (g \circ f)(x) & (\text{definition of composition}) \\
		& = (g \circ f)(y) & (\text{\stepref{7}}) \\
		& = g(f(y))& (\text{definition of composition})
	\end{align*}
\end{proof}
\step{9}{$f(x) = f(y)$}
\begin{proof}
	\pf\ \stepref{4}, \stepref{8}
\end{proof}
\step{10}{$x = y$}
\begin{proof}
	\pf\ \stepref{5}, \stepref{9}
\end{proof}
\qed
\end{proof}

\begin{prop}
For functions $f : A \rightarrow B$ and $g : B \rightarrow C$, if $g \circ f$ is injective then $f$ is injective.
\end{prop}

\begin{proof}
\pf
\step{1}{\pflet{$A$, $B$ and $C$ be sets.}}
\step{2}{\pflet{$f : A \rightarrow B$}}
\step{3}{\pflet{$g : B \rightarrow C$}}
\step{4}{\assume{$g \circ f$ is injective.}}
\step{5}{\pflet{$x,y \in A$}}
\step{6}{\assume{$f(x) = f(y)$}}
\step{7}{$(g \circ f)(x) = (g \circ f)(y)$}
\begin{proof}
	\pf
	\begin{align*}
		(g \circ f)(x) & = g(f(x)) & (\text{definition of composition}) \\
		& = g(f(y)) & (\text{\stepref{6}}) \\
		& = (g \circ f)(y) & (\text{definition of composition})
	\end{align*}
\end{proof}
\step{8}{$x = y$}
\begin{proof}
	\pf\ \stepref{4}, \stepref{7}
\end{proof}
\qed
\end{proof}

\begin{prop}
\label{prop:injective}
Let $f : A \rightarrow B$ be injective. For every set $X$ and functions $x,y : X \rightarrow A$, if $f \circ x = f \circ y$ then $x = y$.
\end{prop}

\begin{proof}
\pf
	\step{a}{\assume{$f$ is injective.}}
	\step{b}{\pflet{$X$ be a set.}}
	\step{c}{\pflet{$x,y : X \rightarrow A$}}
	\step{d}{\assume{$f \circ x = f \circ y$}}
	\step{e}{$\forall t \in X. x(t) = y(t)$}
	\begin{proof}
		\step{i}{\pflet{$t \in X$}}
		\step{ii}{$f(x(t)) = f(y(t))$}
		\begin{proof}
			\pf
			\begin{align*}
				f(x(t)) & = (f \circ x)(t) & (\text{definition of composition}) \\
				& = (f \circ y)(t) & (\text{\stepref{d}}) \\
				& = f(y(t)) & (\text{definition of composition})
			\end{align*}
		\end{proof}
		\step{iii}{$x(t) = y(t)$}
		\begin{proof}
			\pf\ \stepref{a}, \stepref{ii}
		\end{proof}
	\end{proof}
	\step{f}{$x = y$}
	\begin{proof}
		\pf\ Axiom of Extensionality, \stepref{e}
	\end{proof}
\qed
\end{proof}

We will prove the converse as Proposition \ref{prop:injection2}.

\section{Surjections} % CHECKED

\begin{prop}
\label{prop:surj_comp}
The composite of surjective functions is surjective.
\end{prop}

\begin{proof}
\pf
\step{1}{\pflet{$A$, $B$ and $C$ be sets.}}
\step{2}{\pflet{$f : A \rightarrow B$ and $g : B \rightarrow C$}}
\step{3}{\assume{$g$ is surjective.}}
\step{4}{\assume{$f$ is surjective.}}
\step{5}{\pflet{$c \in C$}}
\step{6}{\pick\ $b \in B$ such that $g(b) = c$.}
\begin{proof}
	\pf\ \stepref{3}
\end{proof}
\step{7}{\pick\ $a \in A$ such that $f(a) = b$.}
\begin{proof}
	\pf\ \stepref{4}
\end{proof}
\step{8}{$(g \circ f)(a) = c$}
\begin{proof}
	\pf
	\begin{align*}
		(g \circ f)(a) & = g(f(a)) & (\text{definition of composition}) \\
		& = g(b) & (\text{\stepref{7}}) \\
		& = c & (\text{\stepref{6}})
	\end{align*}
\end{proof}
\qed
\end{proof}

\begin{prop}
Let $f : A \rightarrow B$ and $g : B \rightarrow C$. If $g \circ f$ is surjective then $g$ is surjective.
\end{prop}

\begin{proof}
\pf
\step{1}{\pflet{$A$, $B$ and $C$ be sets.}}
\step{2}{\pflet{$f : A \rightarrow B$ and $g : B \rightarrow C$.}}
\step{3}{\assume{$g \circ f$ is surjective.}}
\step{4}{\pflet{$c \in C$}}
\step{5}{\pick\ $a \in A$ such that $(g \circ f)(a) = c$}
\begin{proof}
	\pf\ \stepref{3}
\end{proof}
\step{6}{$g(f(a)) = c$}
\begin{proof}
	\pf\ From \stepref{5} and the definition of composition.
\end{proof}
\qedstep
\begin{proof}
	\pf\ There exists $b \in B$ such that $g(b) = c$, namely $b = f(a)$.
\end{proof}
\qed
\end{proof}

\begin{prop}
Let $f : A \rightarrow B$ be a surjection. For any set $X$ and functions $x,y : B \rightarrow X$, if $x \circ f = y \circ f$ then $x = y$.
\end{prop}

\begin{proof}
\pf
\step{1}{\pflet{$b \in B$}}
\step{2}{\pick\ $a \in A$ such that $f(a) = b$}
\step{3}{$x(f(a)) = y(f(a))$}
\step{4}{$x(b) = y(b)$}
\qedstep
\begin{proof}
	\pf\ Axiom of Extensionality.
\end{proof}
\qed
\end{proof}

We will prove the converse as Proposition \ref{prop:surjective}.

\section{Bijections}

\begin{prop}
The composite of bijections is a bijection.
\end{prop}

\begin{proof}
\pf
\step{1}{\pflet{$A$, $B$ and $C$ be sets.}}
\step{2}{\pflet{$f : A \rightarrow B$ and $g : B \rightarrow C$}}
\step{3}{\assume{$g$ is bijective.}}
\step{4}{\assume{$f$ is bijective.}}
\step{5}{$g$ is injective.}
\begin{proof}
	\pf\ From \stepref{3}.
\end{proof}
\step{6}{$g$ is surjective.}
\begin{proof}
	\pf\ From \stepref{3}.
\end{proof}
\step{7}{$f$ is injective.}
\begin{proof}
	\pf\ From \stepref{4}.
\end{proof}
\step{8}{$f$ is surjective.}
\begin{proof}
	\pf\ From \stepref{4}.
\end{proof}
\step{9}{$g \circ f$ is injective.}
\begin{proof}
	\pf\ Proposition \ref{prop:inj_comp}, \stepref{5}, \stepref{7}.
\end{proof}
\step{10}{$g \circ f$ is surjective.}
\begin{proof}
	\pf\ Proposition \ref{prop:surj_comp}, \stepref{6}, \stepref{8}.
\end{proof}
\step{11}{$g \circ f$ is bijective.}
\begin{proof}
	\pf\ \stepref{9}, \stepref{10}
\end{proof}
\qed
\end{proof}

\begin{prop}
\[ (A \times B)^C \approx A^C \times B^C \]
\end{prop}

\begin{proof}
\pf\ The function that maps $f$ to $(\pi_1 \circ f, \pi_2 \circ f)$ is a bijection. \qed
\end{proof}

\begin{prop}
\[ A^{B \times C} \approx (A^B)^C \]
\end{prop}

\begin{proof}
\pf\ The function $\Phi$ such that $\Phi(f)(c)(b) = f(b,c)$ is a bijection. \qed
\end{proof}

\section{Domination}

\begin{df}[Dominate]
Let $A$ and $B$ be sets. We say that $B$ \emph{dominates} $A$, and write $A \preccurlyeq B$, iff there exists an injective function $A \rightarrow B$.
\end{df}

\begin{thm}[Schroeder-Bernstein]
Let $A$ and $B$ be sets. If $A \preccurlyeq B$ and $B \preccurlyeq A$ then $A \approx B$.
\end{thm}

\begin{proof}
\pf
\step{1}{\pflet{$f : A \rightarrowtail B$ and $g : B \rightarrowtail A$ be injections.}}
\step{2}{Define the subsets $A_n$ of $A$ by
\begin{align*}
A_0 & := A - g(B) \\
A_{n+1} & := g(f(A_n))
\end{align*}}
\step{3}{Define $h : A \rightarrow B$ by
\[ h(x) = \begin{cases}
f(x) & \text{if } \exists n. x \in A_n \\
\inv{g}(x) & \text{otherwise}
\end{cases} \]}
\step{4}{$h$ is injective.}
\begin{proof}
	\step{a}{\pflet{$x,y \in A$}}
	\step{b}{\assume{$h(x) = h(y)$}}
	\step{c}{\case{$x \in A_m$ and $y \in A_n$.}}
	\begin{proof}
		\pf\ Then $f(x) = f(y)$ so $x = y$ since $f$ is injective.
	\end{proof}
	\step{d}{\case{$x \in A_m$ and there is no $y$ such that $y \in A_n$.}}
	\begin{proof}
		\step{i}{$f(x) = \inv{g}(y)$}
		\step{ii}{$y = g(f(x))$}
		\step{iii}{$y \in A_{m+1}$}
		\qedstep
		\begin{proof}
			\pf\ This is a contradiction.
		\end{proof}
	\end{proof}
	\step{e}{\case{$y \in A_n$ and there is no $m$ such that $x \in A_m$.}}
	\begin{proof}
		\pf\ Similar.
	\end{proof}
	\step{f}{\case{There is no $m$ such that $x \in A_m$ and there is no $n$ such that $y \in A_n$.}}
	\begin{proof}
		\pf\ Then $\inv{g}(x) = \inv{g}(y)$ and so $x = y$.
	\end{proof}
\end{proof}
\step{5}{$h$ is surjective.}
\begin{proof}
	\step{a}{\pflet{$y \in B$}}
	\step{b}{\case{$g(y) \in A_n$}}
	\begin{proof}
		\step{i}{$n \neq 0$}
		\step{ii}{\pick\ $x \in A_{n-1}$ such that $g(y) = g(f(x))$}
		\step{iii}{$y = f(x)$}
		\step{iv}{$y = h(x)$}
	\end{proof}
	\step{c}{\case{There is no $n$ such that $g(y) \in A_n$.}}
	\begin{proof}
		\pf\ Then $h(g(y)) = y$.
	\end{proof}
\end{proof}
\qed
\end{proof}

\section{Identity Function} % CHECKED

\begin{df}[Identity]
For any set $A$, the \emph{identity} function $\id{A} : A \rightarrow A$ is the function defined by $\id{A}(a) = a$.
\end{df}

\subsection{Injections, Surjections, Bijections} % CHECKED

\begin{prop}
For any set $A$, the identity function $\id{A}$ is a bijection.
\end{prop}

\begin{proof}
\pf
\step{1}{\pflet{$A$ be a set.}}
\step{2}{$\id{A}$ is injective.}
\begin{proof}
	\pf\ If $\id{A}(x) = \id{A}(y)$ then $x = y$.
\end{proof}
\step{3}{$\id{A}$ is surjective.}
\begin{proof}
	\pf\ For any $y \in A$, there exists $x \in A$ such that $\id{A}(x) = y$, namely $x = y$.
\end{proof}
\qed
\end{proof}

\subsection{Composition} % CHECKED

\begin{prop}
Let $f : A \rightarrow B$. Then $\id{B} \circ f = f = f \circ \id{A}$.
\end{prop}

\begin{proof}
\pf\ Each is the function that maps $a$ to $f(a)$. \qed
\end{proof}

\begin{prop}
Let $f : A \rightarrow B$.
\begin{enumerate}
\item If there exists $g : B \rightarrow A$ such that $g \circ f = \id{A}$ then $f$ is injective.
\item If $f$ is injective and $A$ is nonempty, then there exists $g : B \rightarrow A$ such that $g \circ f = \id{A}$.
\end{enumerate}
\end{prop}

\begin{proof}
\pf
\step{1}{If there exists $g : B \rightarrow A$ such that $g \circ f = \id{A}$ then $f$ is injective.}
\begin{proof}
	\pf\ If $f(x) = f(y)$ then $x = g(f(x)) = g(f(y)) = y$.
\end{proof}
\step{2}{If $f$ is injective and $A$ is nonempty, then there exists $g : B \rightarrow A$ such that $g \circ f = \id{A}$.}
\begin{proof}
	\step{a}{\assume{$f$ is injective and $A$ is nonempty.}}
	\step{b}{\pick\ $a \in A$}
	\step{c}{Choose a function $g : B \rightarrow A$ such that $f(g(x)) = x$ if there exists $y \in A$ such that $f(y) = x$, otherwise $g(x) = a$.}
	\step{d}{\pflet{$x \in A$} \prove{$g(f(x)) = x$}}
	\step{e}{$f(g(f(x))) = f(x)$}
	\step{f}{$g(f(x)) = x$}
\end{proof}
\qed
\end{proof}

\begin{prop}
Let $f : A \rightarrow B$. Then $f$ is surjective if and only if there exists $g : B \rightarrow A$ such that $f \circ g = \id{B}$.
\end{prop}

\begin{proof}
\pf
\step{2}{If $f$ is surjective then there exists $g : B \rightarrow A$ such that $f \circ g = \id{B}$.}
\begin{proof}
	\step{a}{\assume{$f$ is surjective.}}
	\step{b}{\pick\ $g : B \rightarrow A$ such that, for all $b \in B$, we have $f(g(b)) = b$.}
	\begin{proof}
		\pf\ Axiom of Choice.
	\end{proof}
	\step{c}{$f \circ g = \id{B}$.}
\end{proof}
\step{3}{If there exists $g : B \rightarrow A$ such that $f \circ g = \id{B}$ then $f$ is surjective.}
\begin{proof}
	\step{a}{\pflet{$g : B \rightarrow A$ such that $f \circ g = \id{B}$}}
	\step{b}{\pflet{$X$ be a set.}}
	\step{c}{\pflet{$h,k : B \rightarrow X$}}
	\step{d}{\assume{$h \circ f = k \circ f$}}
	\step{e}{$h = k$}
	\begin{proof}
		\pf\ $h = h \circ f \circ g = k \circ f \circ g = k$
	\end{proof}
\end{proof}
\qed
\end{proof}

\begin{cor}
Let $A$ and $B$ be sets.
\begin{enumerate}
\item If there exists a surjective function $A \rightarrow B$ then there exists an injective function $B \rightarrow A$.
\item If there exists an injective function $A \rightarrow B$ and $A$ is nonempty then there exists a surjective function $B \rightarrow A$.
\end{enumerate}
\end{cor}

\begin{prop}
Let $f : A \rightarrow B$. Then $f$ is bijective if and only if there exists a function $\inv{f} : B \rightarrow A$, the \emph{inverse} of $f$, such that $f \circ \inv{f} = \id{B}$ and $\inv{f} \circ f = \id{A}$, in which case the inverse is unique.
\end{prop}

\begin{proof}
\pf
\step{1}{If $f$ is bijective then there exists $\inv{f} : B \rightarrow A$ such that $f \circ \inv{f} = \id{B}$ and $\inv{f} \circ f = \id{A}$.}
\begin{proof}
	\step{a}{\assume{$f$ is bijective.}}
	\step{b}{\pick\ $g : B \rightarrow A$ such that $f \circ g = \id{B}$}
	\begin{proof}
		\pf\ Proposition \ref{prop:surjective}.
	\end{proof}
	\step{c}{$f \circ g \circ f = f$}
	\step{d}{$g \circ f = \id{A}$}
	\begin{proof}
		\pf\ Proposition \ref{prop:injective}.
	\end{proof}
\end{proof}
\step{2}{If there exists $\inv{f} : B \rightarrow A$ such that $f \circ \inv{f} = \id{B}$ and $\inv{f} \circ f = \id{A}$, then $f$ is bijective.}
\begin{proof}
	\step{a}{\pflet{$\inv{f} : B \rightarrow A$ satisfy $f \circ \inv{f} = \id{B}$ and $\inv{f} \circ f = \id{A}$}}
	\step{b}{$f$ is injective.}
	\begin{proof}
		\pf\ If $f(x) = f(y)$ then $x = \inv{f}(f(x)) = \inv{f}(f(y)) = y$.
	\end{proof}
	\step{c}{$f$ is surjective.}
	\begin{proof}
		\pf\ Proposition \ref{prop:surjective}.
	\end{proof}
\end{proof}
\step{3}{If $g, h : B \rightarrow A$ satisfy $f \circ g = \id{B}$ and $g \circ f = \id{A}$ and $f \circ h = \id{B}$ and $h \circ f = \id{A}$ then $g = h$.}
\begin{proof}
	\pf\ We have $g = g \circ f \circ h = h$.
\end{proof}
\qed
\end{proof}

\section{The Empty Set} % CHECKED

\begin{thm}
There exists a set which has no elements.
\end{thm}

\begin{proof}
\pf\ Take $\{ x \in \mathbb{N} : \bot \}$. \qed
\end{proof}

\begin{thm}
If $E$ and $E'$ have no elements then $E \approx E'$.
\end{thm}

\begin{proof}
\pf
\step{1}{\pflet{$E$ and $E'$ have no elements.}}
\step{2}{\pick\ a function $F : E \rightarrow E'$.}
\begin{proof}
	\pf\ Axiom of Choice since vacuously $\forall x \in E. \exists y \in E'. \top$.
\end{proof}
\step{4}{$F$ is injective.}
\begin{proof}
	\pf\ Vacuously, for all $x,y \in E$, if $F(x) = F(y)$ then $x = y$.
\end{proof}
\step{5}{$F$ is surjective.}
\begin{proof}
	\pf\ Vacuously, for all $y \in E$, there exists $x \in E$ such that $F(x) = y$.
\end{proof}
\qed
\end{proof}

\begin{df}[Empty Set]
The \emph{empty set} $\emptyset$ is the set with no elements.
\end{df}

\section{The Singleton} % CHECKED

\begin{thm}
There exists a set that has exactly one element.
\end{thm}

\begin{proof}
\pf\ The set $\{ x \in \mathbb{N} : x = 0 \}$ has exactly one element. \qed
\end{proof}

\begin{thm}
If $A$ and $B$ both have exactly one element then $A \approx B$.
\end{thm}

\begin{proof}
\pf
\step{1}{\pflet{$A$ and $B$ both have exactly one element $a$ and $b$ respectively.}}
\step{2}{\pflet{$F : A \rightarrow B$ be the function such that, for all $x \in A$, we have $(x = a \wedge F(x) = b)$}}
\step{3}{$F$ is a bijection.}
\qed
\end{proof}

\begin{df}[Singleton]
Let 1 be the set that has exactly one element. Let $*$ be its element.
\end{df}

\subsection{Injections}

\begin{prop}
\label{prop:injection2}
Let $f : A \rightarrow B$. Assume that, for every set $X$ and functions $x,y : X \rightarrow A$, if $f \circ x = f \circ y$ then $x = y$. Then $f$ is injective.
\end{prop}

\begin{proof}
\pf\ Take $X = 1$. \qed
\end{proof}

\section{The Set Two} % CHECKED

\begin{df}[The Set Two]
Let $2 = \{ x \in \mathbb{N} : x = 0 \vee x = 1 \}$.
\end{df}

\begin{prop}
\label{prop:surjective}
Let $f : A \rightarrow B$. Assume that, for any set $X$ and functions $g,h : B \rightarrow X$, if $g \circ f = h \circ f$ then $g = h$. Then $f$ is surjective.
\end{prop}

\begin{proof}
\pf
	\step{a}{\assume{For any set $X$ and functions $g,h : B \rightarrow X$, if $g \circ f = h \circ f$ then $g = h$.}}
	\step{b}{\pflet{$b \in B$}}
	\step{c}{\pflet{$h : B \rightarrow 2$ be the function that maps everything to 1.}}
	\step{d}{\pflet{$k : B \rightarrow 2$ be the function that maps $b$ to 0 and everything else to 1.}}
	\step{e}{$h \neq k$}
	\step{f}{$h \circ f \neq k \circ f$}
	\step{g}{\pick\ $a \in A$ such that $h(f(a)) \neq k(f(a))$}
	\step{h}{$f(a) = b$}
\qed
\end{proof}

\section{Subsets} % CHECKED

\begin{df}[Subset]
A \emph{subset} of a set $A$ consists of a set $S$ and an injection $i : S \rightarrowtail A$. We write $(S,i) \subseteq A$.

We say two subsets $(S,i)$ and $(T,j)$ are \emph{equal}, $(S,i) = (T,j)$, iff there exists a bijection $\phi : S \approx T$ such that $j \circ \phi = i$.
\end{df}

\begin{prop}
For any subset $(S,i)$ of $A$ we have $(S,i) = (S,i)$.
\end{prop}

\begin{proof}
\pf\ We have $\id{S} : S \approx S$ and $i \circ \id{S} = i$.
\end{proof}

\begin{prop}
If $(S,i) = (T,j)$ then $(T,j) = (S,i)$.
\end{prop}

\begin{proof}
\pf\ If $\phi : S \approx T$ and $j \circ \phi = i$ then $\inv{\phi} : T \approx S$ and $i \circ \inv{\phi} = j$. \qed
\end{proof}

\begin{prop}
If $(R,i) = (S,j)$ and $(S,j) = (T,k)$ then $(R,i) = (T,k)$.
\end{prop}

\begin{proof}
\pf\ If $\phi : R \approx S$ and $j \circ \phi = i$, and $\psi : S \approx T$ and $k \circ \psi = j$, then $\psi \circ \phi : R \approx T$ and $k \circ \psi \circ \phi = i$. \qed
\end{proof}

\begin{df}[Membership]
Given $(S,i) \subseteq A$ and $a \in A$, we write $a \in (S,i)$ for $\exists s \in S. i(s) = a$.
\end{df}

\begin{prop}
If $a \in (S,i)$ and $(S,i) = (T,j)$ then $a \in (T,j)$.
\end{prop}

\begin{proof}
\pf\ If $i(s) = a$ then $j(\phi(s)) = a$. \qed
\end{proof}

\begin{df}[Union]
Given subsets $S$ and $T$ of $A$, the \emph{union} is the subset $\{ x \in A : x \in S \vee x \in T \}$.
\end{df}

\begin{df}[Intersection]
Given subsets $S$ and $T$ of $A$, the \emph{intersection} is the subset $\{ x \in A : x \in S \wedge x \in T \}$.
\end{df}

\begin{prop}[Distributive Law]
\[ R \cap (S \cup T) = (R \cap S) \cup (R \cap T) \]
\end{prop}

\begin{prop}[Distributive Law]
\[ R \cup (S \cap T) = (R \cup S) \cap (R \cup T) \]
\end{prop}

\begin{df}
Given a set $A$, we write $\emptyset$ for the subset $(\emptyset, !)$ where $!$ is the unique function $\emptyset \rightarrow A$.
\end{df}

\begin{prop}
\[ S \cup \emptyset = S \]
\end{prop}

\begin{prop}
\[ S \cap \emptyset = S \]
\end{prop}

\begin{df}[Inclusion]
Given subsets $(S,i)$ and $(T,j)$ of a set $A$, we write $(S,i) \subseteq (T,j)$ iff there exists $f : S \rightarrow T$ such that $j \circ f = i$.
\end{df}

\begin{prop}
\[ \emptyset \subseteq S \]
\end{prop}

\begin{df}[Disjoint]
Subsets $S$ and $T$ of $A$ are \emph{disjoint} iff $S \cap T = \emptyset$.
\end{df}

\begin{df}[Difference]
Given subsets $S$ and $T$ of $A$, the \emph{difference} of $S$ and $T$ is $S - T = \{ x \in A : x \in S \wedge x \notin T \}$.
\end{df}

\begin{prop}[De Morgan's Law]
\[ R - (S \cup T) = (R - S) \cap (R - T) \]
\end{prop}

\begin{prop}[De Morgan's Law]
\[ R - (S \cap T) = (R - S) \cup (R - T) \]
\end{prop}

\section{Power Set}

\begin{df}[Power Set]
The \emph{power set} of a set $A$ is
\[ \mathcal{P} A := 2^A \]
\end{df}

\begin{df}[Cover]
Let $X$ be a set and $\mathcal{A} \subseteq \mathcal{P} X$. Then $\mathcal{A}$ is a \emph{cover} of $X$, or \emph{covers} $X$, iff $\bigcup \mathcal{A} = X$.

Given a subset $Y$ of $X$ and $\mathcal{A} \subseteq \mathcal{P} X$, we say $\mathcal{A}$ \emph{covers} $Y$ iff $Y \subseteq \bigcup \mathcal{A}$.
\end{df}

\section{Saturated Set}

\begin{df}[Saturated]
Let $A$ and $B$ be sets. Let $f : A \rightarrow B$ be surjective. Let $C \subseteq A$. Then $C$ is \emph{saturated} with respect to $f$ iff, for all $x \in C$ and $y \in A$, if $f(x) = f(y)$ then $y \in C$.
\end{df}


\section{Union} % CHECKED

\begin{df}[Union]
Given $\mathcal{A} \in \mathcal{P} \mathcal{P} X$, its \emph{union} is
\[ \bigcup \mathcal{A} := \{ x \in X : \exists S \in \mathcal{A}. x \in S \} \in \mathcal{P} X \enspace . \]
\end{df}

\subsection{Intersection} % CHECKED

\begin{df}[Intersection]
Given $\mathcal{A} \in \mathcal{P} \mathcal{P} X$, its \emph{intersection} is
\[ \bigcap \mathcal{A} := \{ x \in X : \forall S \in \mathcal{A}. x \in S \} \in \mathcal{P} X \enspace . \]
\end{df}

\subsection{Direct Image} % CHECKED

\begin{df}[Direct Image]
Let $f : A \rightarrow B$. Let $S$ be a subset of $A$. The \emph{(direct) image} of $S$ under $f$ is the subset of $B$ given by
\[ f(S) := \{ f(a) : a \in S \} \enspace . \]
\end{df}

\begin{prop}
$ $
\begin{enumerate}
\item If $S \subseteq T$ then $f(S) \subseteq f(T)$
\item $f(\bigcup \mathcal{S}) = \bigcup_{S \in \mathcal{S}} f(S)$
\end{enumerate}
\end{prop}

\begin{ex}
It is not true in general that $f(\bigcap \mathcal{S}) = \bigcap_{S \in \mathcal{S}} f(S)$. Take $f$ to be the only function $\{0,1\} \rightarrow \{0\}$, and $\mathcal{S} = \{\{0\},\{1\}\}$. Then $f(\bigcap \mathcal{S}) = \emptyset$ but $\bigcap_{S \in \mathcal{S}} f(S) = \{0\}$.
\end{ex}

\begin{ex}
It is not true in general that $f(S - T) = f(S) - f(T)$. Take $f$ to be the only function $\{0,1\} \rightarrow \{0\}$, $S = \{0\}$ and $T = \{1\}$. Then $f(S-T) = \{0\}$ but $f(S) - f(T) = \emptyset$.
\end{ex}

\section{Inverse Image} % CHECKED

\begin{df}[Inverse Image]
Let $f : A \rightarrow B$. Let $S$ be a subset of $B$. The \emph{inverse image} or \emph{preimage} of $S$ under $f$ is the subset of $A$ given by
\[ \inv{f}(S) := \{ x \in A : f(x) \in S \} \enspace . \]
\end{df}

\begin{prop}
\begin{enumerate}
\item If $S \subseteq T$ then $\inv{f}(S) \subseteq \inv{f}(T)$
\item $\inv{f}(\bigcup \mathcal{S}) = \bigcup_{S \in \mathcal{S}} \inv{f}(S)$
\item $\inv{f}(\bigcap \mathcal{S}) = \bigcap_{S \in \mathcal{S}} \inv{f}(S)$
\item $\inv{f}(S - T) = \inv{f}(S) - \inv{f}(T)$
\item $S \subseteq \inv{f}(f(S))$. Equality holds if $f$ is injective.
\item $f(\inv{f}(T)) \subseteq T$. Equality holds if $f$ is surjective.
\item $\inv{(g \circ f)}(S) = \inv{f}(\inv{g}(S))$
\end{enumerate}
\end{prop}

\subsection{Saturated Sets}

\begin{prop}
Let $A$ and $B$ be sets. Let $f : A \rightarrow B$ be surjective. Let $C \subseteq A$. Then $C$ is saturated if and only if there exists $D \subseteq B$ such that $C = \inv{f}(D)$.
\end{prop}

\begin{proof}
\pf
\step{1}{If $C$ is saturated then there exists $D \subseteq B$ such that $C = \inv{f}(D)$.}
\begin{proof}
	\step{a}{\assume{$C$ is saturated.}}
	\step{b}{\pflet{$D = f(C)$}}
	\step{c}{$C \subseteq \inv{f}(D)$}
	\begin{proof}
		\step{i}{\pflet{$x \in C$}}
		\step{ii}{$f(x) \in D$}
		\begin{proof}
			\pf\ \stepref{b}
		\end{proof}
		\step{iii}{$x \in \inv{f}(D)$}
	\end{proof}
	\step{d}{$\inv{f}(D) \subseteq C$}
	\begin{proof}
		\step{i}{\pflet{$x \in \inv{f}(D)$}}
		\step{ii}{$f(x) \in D$}
		\step{iii}{\pick\ $y \in C$ such that $f(x) = f(y)$}
		\begin{proof}
			\pf\ \stepref{b}
		\end{proof}
		\step{iv}{$x \in C$}
		\begin{proof}
			\pf\ \stepref{a}
		\end{proof}
	\end{proof}
\end{proof}
\step{2}{If there exists $D \subseteq B$ such that $C = \inv{f}(D)$ then $C$ is saturated.}
\begin{proof}
	\step{a}{\pflet{$D \subseteq B$ be such that $C = \inv{f}(D)$.}}
	\step{b}{\pflet{$x \in C$ and $y \in A$}}
	\step{c}{\assume{$f(x) = f(y)$}}
	\step{d}{$f(x) \in D$}
	\step{e}{$f(y) \in D$}
	\step{f}{$y \in C$}
\end{proof}
\qed
\end{proof}

\section{Relations} % CHECKED

\begin{df}[Relation]
Let $A$ and $B$ be sets. A \emph{relation} $R$ between $A$ and $B$, $R : A \looparrowright B$, is a subset of $A \times B$.

Given $a \in A$ and $b \in B$, we write $aRb$ for $(a,b) \in R$.

A relation \emph{on} a set $A$ is a relation between $A$ and $A$.
\end{df}

\begin{df}[Reflexive]
A relation $R$ on a set $A$ is \emph{reflexive} iff $\forall a \in A. aRa$.
\end{df}

\begin{df}[Symmetric]
A relation $R$ on a set $A$ is \emph{symmetric} iff, whenever $xRy$, then $yRx$.
\end{df}

\begin{df}[Transitive]
A relation $R$ on a set $A$ is \emph{transitive} iff, whenever $xRy$ and $yRz$, then $xRz$.
\end{df}

\subsection{Equivalence Relations}

\begin{df}[Equivalence Relation]
A relation $R$ on a set $A$ is an \emph{equivalence relation} iff it is reflexive, symmetric and transitive.
\end{df}

\begin{df}[Equivalence Class]
Let $R$ be an equivalence relation on a set $A$ and $a \in A$. The \emph{equivalence class} of $a$ with respect to $R$ is
\[ \{ x \in A : xRa \} \enspace . \]
\end{df}

\begin{prop}
Two equivalence classes are either disjoint or equal.
\end{prop}


\section{Power Set}

\begin{df}[Power Set]
The \emph{power set} of a set $A$ is $\mathcal{P} A := 2^A$.

Given $S \in \mathcal{P} A$ and $a \in A$, we write $a \in A$ for $S(a) = 1$.
\end{df}

\begin{df}[Pairwise Disjoint]
Let $P \subseteq \mathcal{P} A$. We say the members of $P$ are \emph{pairwise disjoint} iff, for all $S,T \in P$, if $S \neq T$ then $S \cap T = \emptyset$.
\end{df}

\subsection{Partitions}

\begin{df}[Partition]
Let $A$ be a set. A \emph{partition} of $A$ is a set $P \in \mathcal{P} \mathcal{P} A$ such that:
\begin{itemize}
\item $\bigcup P = A$
\item Every member of $P$ is nonempty.
\item The members of $P$ are pairwise disjoint.
\end{itemize}
\end{df}

\section{Cartesian Product}

\begin{df}[Cartesian Product]
Let $A$ and $B$ be sets. The \emph{Cartesian product} of $A$ and $B$, $A \times B$, is the tabulation of the relation $A \looparrowright B$ that holds for all $a \in A$ and $b \in B$. The associated functions $\pi_1 : A \times B \rightarrow A$ and $\pi_2 : A \times B \rightarrow B$ are called the \emph{projections}.

Given $a \in A$ and $b \in B$, we write $(a,b)$ for the unique element of $A \times B$ such that $\pi_1(a,b) = a$ and $\pi_2(a,b) = b$.
\end{df}

\section{Quotient Sets}

\begin{prop}
Let $\sim$ be an equivalence relation on $X$. Then there exists a set $X/\sim$, the \emph{quotient set} of $X$ with respect to $\sim$, and a surjective function $\pi : X \twoheadrightarrow X / \sim$, the \emph{canonical projection}, such that, for all $x,y \in X$, we have $x \sim y$ if and only if $\pi(x) = \pi(y)$.

Further, if $p : X \twoheadrightarrow Q$ is another quotient with respect to $\sim$, then there exists a unique bijection $\phi : X / \sim \approx Q$ such that $\phi \circ \pi = p$.
\end{prop}

\section{Partitions}

\begin{df}[Partition]
A \emph{partition} of a set $X$ is a set of pairwise disjoint subsets of $X$ whose union is $X$.
\end{df}

\section{Disjoint Union}

\begin{thm}
For any sets $A$ and $B$, there exists a set $A + B$, the \emph{disjoint union} of $A$ and $B$, and functions $\kappa_1 : A \rightarrow A + B$ and $\kappa_2 : B \rightarrow A + B$, the \emph{injections}, such that, for every set $X$ and functions $f : A \rightarrow X$ and $g : B \rightarrow X$, there exists a unique function $[f,g] : A + B \rightarrow X$ such that $[f,g] \circ \kappa_1 = f$ and $[f,g] \circ \kappa_2 = g$.
\end{thm}

\begin{proof}
\pf
\step{1}{\pflet{$A + B := \{ p \in \mathcal{P} A \times \mathcal{P} B : \exists a \in A. p = (\{a\},\emptyset) \vee \exists b \in B. p = (\emptyset, \{b\}) \}$}}
% TODO
\end{proof}

\begin{df}[Restriction]
Let $f : A \rightarrow B$ and let $(S,i)$ be a subset of $A$. The \emph{restriction} of $f$ to $S$ is the function $f \restriction S : S \rightarrow B$ defined by $f \restriction S = f \circ i$.
\end{df}

\section{Natural Numbers}

\begin{thm}[Principle of Recursive Definition]
Let $A$ be a set. Let $F$ be the set of all functions $\{ m \in \mathbb{N} : m < n \} \rightarrow A$ for some $n$. Let $\rho : F \rightarrow A$. Then there exists a unique $g : \mathbb{N} \rightarrow A$ such that, for all $n \in \mathbb{N}$, we have
\[ g(n) = \rho(g \restriction \{ m \in \mathbb{N} : m < n \}) \enspace . \]
\end{thm}

\begin{proof}
\pf
\step{1}{Given a subset $B \subseteq \mathbb{N}$, let us say that a function $g : B \rightarrow A$ is \emph{acceptable} iff, for all $n \in B$, we have
\[ \forall m < n. m \in B \]
and
\[ g(n) = \rho(g \restriction \{ m \in \mathbb{N} : m < n \}) \enspace . \]}
\step{2}{For all $n \in \mathbb{N}$, there exists an acceptable function $\{ m \in \mathbb{N} : m < n \} \rightarrow A$.}
\begin{proof}
	\step{a}{\pflet{$P[n]$ be the property: There exists an acceptable function $\{ m \in \mathbb{N} : m < n \} \rightarrow A$.}}
	\step{b}{$P[0]$}
	\begin{proof}
		\pf\ The unique function $\emptyset \rightarrow A$ is acceptable.
	\end{proof}
	\step{c}{For any natural number $n$, if $P[n]$ then $P[n+1]$.}
	\begin{proof}
		\step{i}{\assume{$P[n]$}}
		\step{ii}{\pick\ an acceptable $f : \{ m \in \mathbb{N} : m < n \} \rightarrow A$.}
		\step{iii}{\pflet{$g : \{ m \in \mathbb{N} : m < n + 1 \} \rightarrow A$ be the function
		\[ g(m) = \begin{cases}
		f(m) & \text{if } m < n \\
		\rho(f) & \text{if } m = n
		\end{cases} \]}}
		\step{iv}{$g$ is acceptable.}
	\end{proof}
\end{proof}
\step{3}{If $g : B \rightarrow A$ and $h : C \rightarrow A$ are acceptable, then $g$ and $h$ agree on $B \cap C$.}
\step{4}{Define $g : \mathbb{N} \rightarrow A$ by: $g(n) = a$ iff there exists an acceptable $h : \{ m \in \mathbb{N} : m < n + 1 \}$ such that $h(n) = a$.}
\step{5}{$g$ is acceptable.}
\step{6}{If $g' : \mathbb{N} \rightarrow A$ is acceptable then $g' = g$.}
\qed
\end{proof}

\section{Finite and Infinite Sets}

\begin{df}[Finite]
A set $A$ is \emph{finite} iff there exists $n \in \mathbb{N}$ such that $A \approx \{ m \in \mathbb{N} : m < n \}$. In this case, we say $A$ has \emph{cardinality} $n$.
\end{df}

\begin{prop}
Let $n \in \mathbb{N}$. Let $A$ be a set. Let $a_0 \in A$. Then $A \approx \{ m \in \mathbb{N} : m < n + 1 \}$ if and only if $A - \{a_0\} \approx \{ m \in \mathbb{N} : m < n \}$.
\end{prop}

\begin{thm}
Let $A$ be a set. Suppose that $A \approx \{ m \in \mathbb{N} : m < n \}$. Let $B$ be a proper subset of $A$. Then $B \not\approx \{ m \in \mathbb{N} : m < n \}$ but there exists $m < n$ such that $B \approx \{ k \in \mathbb{N} : k < m \}$.
\end{thm}

\begin{proof}
\pf
\step{1}{\pflet{$P[n]$ be the property: for every set $A$, if $A approx \{ m \in \mathbb{N} : m < n \}$, then for every proper subset $B$ of $A$, we have $B \not\approx \{ m \in \mathbb{N} : m < n \}$ but there exists $m < n$ such that $B \approx \{ k \in \mathbb{N} : k < m \}$.}}
\step{2}{$P[0]$}
\begin{proof}
	\pf\ If $A \approx \{ m \in \mathbb{N} : m < 0 \}$ then $A$ is empty and so has no proper subset.
\end{proof}
\step{3}{For every natural number $n$, if $P[n]$ then $P[n+1]$.}
\begin{proof}
	\step{a}{\pflet{$n$ be a natural number.}}
	\step{b}{\assume{$P[n]$}}
	\step{c}{\pflet{$A$ be a set.}}
	\step{d}{\assume{$A \approx \{ m \in \mathbb{N} : m < n + 1 \}$}}
	\step{e}{\pflet{$B$ be a proper subset of $A$.}}
	\step{f}{\case{$B = \emptyset$}}
	\begin{proof}
		\pf\ Then $B \not\approx \{ m \in \mathbb{N} : m < n + 1\}$ but $B \approx \{ k \in \mathbb{N} : k < 0 \}$.
	\end{proof}
	\step{g}{\case{$B \neq \emptyset$}}
	\begin{proof}
		\step{i}{\pick\ $b_0 \in B$}
		\step{ii}{$A - \{b_0\} \approx \{ m \in \mathbb{N} : m < n \}$}
		\step{iii}{$B - \{b_0\}$ is a proper subset of $A - \{b_0\}$}
		\step{iv}{$B - \{b_0\} \not\approx \{m \in \mathbb{N} : m < n \}$}
		\step{v}{$B \approx \{m \in \mathbb{N} : m < n + 1\}$}
		\step{vi}{\pick\ $m < n$ such that $B - \{b_0\} \approx \{ k \in \mathbb{N} : k < m \}$}
		\step{vii}{$m + 1 < n + 1$}
		\step{viii}{$B \approx \{ k \in \mathbb{N} : k < m + 1 \}$}
	\end{proof}
\end{proof}
\qed
\end{proof}

\begin{cor}
\label{cor:Dedekind_infinite}
If $A$ is finite then there is no bijection between $A$ and a proper subset of $A$.
\end{cor}

\begin{cor}
$\mathbb{N}$ is infinite.
\end{cor}

\begin{cor}
The cardinality of a finite set is unique.
\end{cor}

\begin{cor}
A subset of a finite set is finite.
\end{cor}

\begin{cor}
If $A$ is finite and $B$ is a proper subset of $A$ then $|B| < |A|$.
\end{cor}

\begin{cor}
Let $A$ be a set. Then the following are equivalent:
\begin{enumerate}
\item $A$ is finite.
\item There exists a surjection from an initial segment of $\mathbb{N}$ onto $A$.
\item There exists an injection from $A$ to an initial segment of $\mathbb{N}$.
\end{enumerate}
\end{cor}

\begin{cor}
A finite union of finite sets is finite.
\end{cor}

\begin{cor}
A finite Cartesian product of finite sets is finite.
\end{cor}

\begin{thm}
Let $A$ be a set. The following are equivalent:
\begin{enumerate}
\item There exists an injective function $\mathbb{N} \rightarrowtail A$.
\item There exists a bijection between $A$ and a proper subset of $A$.
\item $A$ is infinite.
\end{enumerate}
\end{thm}

\begin{proof}
\pf
\step{1}{$1 \Rightarrow 2$}
\begin{proof}
	\step{a}{\pflet{$f : \mathbb{N} \rightarrowtail A$ be injective.}}
	\step{b}{\pflet{$s : \mathbb{N} \approx \mathbb{N} - \{0\}$ be the function $s(n) = n + 1$.}}
	\step{c}{$f \circ s \circ \inv{f} : A \approx A - \{f(0)\}$}
\end{proof}
\step{2}{$2 \Rightarrow 3$}
\begin{proof}
	\pf\ Corollary \ref{cor:Dedekind_infinite}.
\end{proof}
\step{3}{$3 \Rightarrow 1$}
\begin{proof}
	\pf\ Choose a function $f : \mathbb{N} \rightarrow A$ such that $f(n) \in A - \{ f(m) : m < n \}$ for all $n$.
\end{proof}
\qed
\end{proof}

\section{Countable Sets}

\begin{df}[Countable]
A set $A$ is \emph{countably infinite} iff $A \approx \mathbb{N}$.
\end{df}

\begin{prop}
$\mathbb{N} \times \mathbb{N}$ is countably infinite.
\end{prop}

\begin{proof}
\pf\ Define $f : \mathbb{N} \times \mathbb{N} \approx \{ (x,y) \in \mathbb{N} \times \mathbb{N} : y \leq x \}$ by
\[ f(x,y) = (x+y,y) \]
Define $g : \{ (x,y) \in \mathbb{N} \times \mathbb{N} : y \leq x \} \approx \mathbb{N}$ by
\[ g(x,y) = x(x-1)/2 + y \enspace . \qed \]
\end{proof}

\begin{prop}
Every infinite subset of $\mathbb{N}$ is countably infinite.
\end{prop}

\begin{proof}
\pf
\step{1}{\pflet{$C$ be an infinite subset of $\mathbb{N}$}}
\step{2}{Define $h : \mathbb{Z} \rightarrow C$ by recursion thus: $h(n)$ is the smallest element of $C - \{ h(m) : m < n \}$.}
\step{3}{$h$ is injective.}
\begin{proof}
	\pf\ If $m < n$ then $h(m) \neq h(n)$ because $h(n) \in C - \{ h(m) : m < n \}$.
\end{proof}
\step{4}{$h$ is surjective.}
\begin{proof}
	\step{a}{For all $n \in \mathbb{N}$ we have $n \leq h(n)$.}
	\step{b}{\pflet{$c \in C$}}
	\step{c}{$c \leq h(c)$}
	\step{d}{\pflet{$n$ be least such that $c \leq h(n)$}}
	\step{e}{$c \in C - \{ h(m) : m < n \}$}
	\step{f}{$h(n) \leq c$}
	\step{g}{$h(n) = c$}
\end{proof}
\qed
\end{proof}

\begin{df}[Countable]
A set is \emph{countable} iff it is either finite or countably infinite; otherwise it is \emph{uncountable}.
\end{df}

\begin{prop}
Let $B$ be a nonempty set. Then the following are equivalent.
\begin{enumerate}
\item $B$ is countable.
\item There exists a surjection $\mathbb{N} \twoheadrightarrow B$.
\item There exists an injection $B \rightarrowtail \mathbb{N}$.
\end{enumerate}
\end{prop}

\begin{proof}
\pf
\step{1}{$1 \Rightarrow 2$}
\begin{proof}
	\step{a}{\assume{$B$ is countable.}}
	\step{b}{\case{$B$ is finite.}}
	\begin{proof}
		\step{i}{\pick\ a natural number $n$ and bijection $f : \{ m \in \mathbb{N} : m < n \} \approx B$}
		\step{ii}{\pick\ $b \in B$}
		\step{iii}{Extend $f$ to a surjection $g : \mathbb{N} \twoheadrightarrow B$ by setting $g(m) = b$ for $m \geq n$.}
	\end{proof}
	\step{c}{\case{$B$ is countably infinite.}}
	\begin{proof}
		\pf\ Then there exists a bijection $\mathbb{N} \approx B$.
	\end{proof}
\end{proof}
\step{2}{$2 \Rightarrow 3$}
\begin{proof}
	\pf\ Given a surjection $f : \mathbb{N} \twoheadrightarrow B$, define $g : B \rightarrowtail \mathbb{N}$ by $g(b)$ is the smallest number such that $f(g(b)) = b$.
\end{proof}
\step{3}{$3 \Rightarrow 1$}
\begin{proof}
	\step{a}{\pflet{$f : B \rightarrowtail \mathbb{N}$ be injective.}}
	\step{b}{$f(B)$ is countable.}
	\step{c}{$B \approx f(B)$}
	\step{d}{$B$ is countable.}
\end{proof}
\qed
\end{proof}

\begin{cor}
A subset of a countable set is countable.
\end{cor}

\begin{cor}
$\mathbb{N} \times \mathbb{N}$ is countably infinite.
\end{cor}

\begin{proof}
\pf\ The function that maps $(m,n)$ to $2^m 3^n$ is injective. \qed
\end{proof}

\begin{cor}
The Cartesian product of two countable sets is countable.
\end{cor}

\begin{thm}
A countable union of countable sets is countable.
\end{thm}

\begin{proof}
\pf
\step{1}{\pflet{$A$ be a set.}}
\step{2}{\pflet{$\mathcal{B} \subseteq \mathcal{P} A$ be a countable set of countable sets such that $\bigcup \mathcal{B} = A$}}
\step{3}{\pick\ a surjection $B : \mathbb{N} \twoheadrightarrow \mathcal{B}$}
\step{4}{\assume{w.l.o.g. each $B(n)$ is nonempty.}}
\step{5}{For $n \in \mathbb{N}$, \pick\ a surjective function $g_n : \mathbb{N} \twoheadrightarrow B(n)$}
\step{6}{\pflet{$h : \mathbb{N} \times \mathbb{N} \rightarrow A$ be the function $h(m,n) = g_m(n)$}}
\step{7}{$h$ is surjective.}
\qed
\end{proof}

\begin{thm}
$2^\mathbb{N}$ is uncountable.
\end{thm}

\begin{proof}
\pf
\step{1}{\pflet{$f : \mathbb{N} \rightarrow 2^\mathbb{N}$} \prove{$f$ is not surjective.}}
\step{2}{Define $g : \mathbb{N} \rightarrow 2$ by $g(n) = 1 - f(n)(n)$.}
\step{3}{For all $n \in \mathbb{N}$ we have $g(n) \neq f(n)(n)$.}
\step{4}{For all $n \in \mathbb{N}$ we have $g \neq f(n)$.}
\qed
\end{proof}

\begin{thm}
For any set $A$, there is no surjective function $A \rightarrow \mathcal{P} A$.
\end{thm}

\begin{proof}
\pf
\step{1}{\pflet{$f : A \rightarrow \mathcal{P} A$}}
\step{2}{\pflet{$S = \{ x \in A : x \notin f(x) \}$}}
\step{3}{For all $a \in A$ we have $S \neq f(a)$}
\begin{proof}
	\pf\ We have $a \in S$ if and only if $a \notin f(a)$.
\end{proof}
\qed
\end{proof}

\begin{cor}
For any set $A$, there is no injective function $\mathcal{P} A \rightarrow A$.
\end{cor}

\section{Fixed Points}

\begin{df}[Fixed Point]
Let $A$ be a set and $f : A \rightarrow A$.
A \emph{fixed point} of $f$ is an element $a \in A$ such that $f(a) = a$.
\end{df}

\section{Finite Intersection Property}

\begin{df}[Finite Intersection Property]
Let $X$ be a set. Let $\mathcal{C} \subseteq \mathcal{P} X$. Then $\mathcal{C}$ has the \emph{finite intersection property} iff every finite nonempty subset of $\mathcal{C}$ has nonempty intersection.
\end{df}

\chapter{Relations}

\begin{df}[Reflexive]
A relation $R \subseteq A \times A$ is \emph{reflexive} iff, for all $a \in A$, we have $(a,a) \in R$.
\end{df}

\begin{df}[Antisymmetric]
A relation $R \subseteq A \times A$ is \emph{antisymmetric} iff, for all $a,b \in A$, if $(a,b) \in R$ and $(b,a) \in R$ then $a = b$.
\end{df}

\begin{df}[Transitive]
A relation $R \subseteq A \times A$ is \emph{transitive} iff, for all $a,b,c \in A$, if $(a,b) \in R$ and $(b,c) \in R$ then $(a,c) \in R$.
\end{df}

\begin{df}[Partial Order]
A \emph{partial order} on a set $A$ is a relation on $A$ that is reflexive, antisymmetric and transitive.

We say $(A, \leq)$ is a \emph{partially ordered set} or \emph{poset} iff $\leq$ is a partial order on $A$.
\end{df}

\begin{df}[Greatest]
Let $A$ be a poset and $a \in A$. Then $a$ is the \emph{greatest} element iff $\forall x \in A. x \leq a$.
\end{df}

\begin{df}[Least]
Let $A$ be a poset and $a \in A$. Then $a$ is the \emph{least} element iff $\forall x \in A. a \leq x$.
\end{df}

\begin{df}[Upper Bound]
Let $A$ be a poset, $S \subseteq A$, and $u \in A$. Then $u$ is an \emph{upper bound} for $S$ iff $\forall x \in S. x \leq u$. We say $S$ is \emph{bounded above} iff it has an upper bound.
\end{df}

\begin{df}[Lower Bound]
Let $A$ be a poset, $S \subseteq A$, and $l \in A$. Then $l$ is a \emph{lower bound} for $S$ iff $\forall x \in S. l \leq x$. We say $S$ is \emph{bounded below} iff it has a lower bound.
\end{df}

\begin{df}[Supremum]
Let $A$ be a poset, $S \subseteq A$ and $s \in A$. Then $s$ is the \emph{supremum} or \emph{least upper bound} for $S$ iff $s$ is the least element in the sub-poset of upper bounds for $A$.
\end{df}

\begin{df}[Supremum]
Let $A$ be a poset, $S \subseteq A$ and $i \in A$. Then $i$ is the \emph{infimum} or \emph{greatest lower bound} for $S$ iff $i$ is the greatest element in the sub-poset of lower bounds for $A$.
\end{df}

\begin{df}[Least Upper Bound Property]
A poset $A$ has the \emph{least upper bound property} iff every nonempty subset of $A$ that is bounded above has a least upper bound.
\end{df}

\begin{prop}
Let $A$ be a poset. Then $A$ has the least upper bound property if and only if every nonempty subset of $A$ that is bounded below has a greatest lower bound.
\end{prop}

\begin{proof}
\pf
\step{1}{If $A$ has the least upper bound property then every subset of $A$ that is bounded below has a greatest lower bound.}
\begin{proof}
	\step{a}{\assume{$A$ has the least upper bound property.}}
	\step{b}{\pflet{$S \subseteq A$ be nonempty and bounded below.}}
	\step{c}{\pflet{$L$ be the set of lower bounds of $S$.}}
	\step{d}{$L$ is nonempty.}
	\begin{proof}
		\pf\ Because $S$ is bounded below.
	\end{proof}
	\step{e}{$L$ is bounded above.}
	\begin{proof}
		\pf\ Pick an element $s \in S$. Then $s$ is an upper bound for $L$.
	\end{proof}
	\step{f}{\pflet{$s$ be the supremum of $L$.}}
	\step{g}{$s$ is the greatest lower bound of $S$.}
	\begin{proof}
		\step{i}{$s$ is a lower bound of $S$.}
		\begin{proof}
			\step{one}{\pflet{$x \in S$}}
			\step{two}{$x$ is an upper bound for $L$.}
			\step{three}{$s \leq x$}
		\end{proof}
		\step{ii}{For any lower bound $l$ of $S$ we have $l \leq s$.}
		\begin{proof}
			\pf\ Immediate from \stepref{f}.
		\end{proof}
	\end{proof}
\end{proof}
\step{2}{If every subset of $A$ that is bounded below has a greatest lower bound, then $A$ has the least upper bound property.}
\begin{proof}
	\pf\ Dual.
\end{proof}
\qed
\end{proof}

\chapter{Order Theory}

\section{Strict Partial Orders}

\begin{df}[Strict Partial Order]
A \emph{strict partial order} on a set $A$ is a relation on $A$ that is irreflexive and transitive.
\end{df}

\begin{prop}
\begin{enumerate}
\item If $\leq$ is a partial order on $A$ then $<$ is a strict partial order on $A$, where $x < y$ iff $x \leq y \wedge x \neq y$.
\item If $<$ is a strict partial order on $A$ then $\leq$ is a partial order on $A$, where $x \leq y$ iff $x < y \vee x = y$.
\item These two relations are inverses of one another.
\end{enumerate}
\end{prop}

\subsection{Linear Orders}

\begin{df}[Linear Order]
A \emph{linear order} on a set $A$ is a partial order $\leq$ on $A$ such that, for all $x,y \in A$, we have $x \leq y$ or $y \leq x$.

A \emph{linearly ordered set} is a pair $(X, \leq)$ such that $X$ is a set and $\leq$ is a linear order on $X$.
\end{df}

\begin{df}[Open Interval]
Let $X$ be a linearly ordered set and $a,b \in X$. The \emph{open interval} $(a,b)$ is the set
\[ \{ x \in X : a < x < b \} \enspace . \]
\end{df}

\begin{df}[Immediate Predecessor, Immediate Successor]
Let $X$ be a linearly ordered set and $a,b \in X$. Then $b$ is the \emph{(immediate) successor} of $a$, and $a$ is the \emph{(immediate) predecessor} of $b$, iff $a < B$ and there is no $x$ such that $a < x < b$.
\end{df}

\begin{df}[Dictionary Order]
Let $A$ and $B$ be linearly ordered sets. The \emph{dictionary order} on $A \times B$ is the order defined by
\[ (a,b) < (a',b') \Leftrightarrow a < a' \vee (a = a' \wedge b < b') \enspace . \]
\end{df}

\begin{thm}[Maximum Principle]
Every poset has a maximal linearly ordered subset.
\end{thm}

\begin{proof}
\pf
\step{1}{\pflet{$(A, \leq)$ be a poset.}}
\step{2}{\pick\ a well ordering $\preccurlyeq$ of $A$.}
\begin{proof}
	\pf\ Well Ordering Theorem.
\end{proof}
\step{3}{\pflet{$h : A \rightarrow 2$ be the function defined by $\preccurlyeq$-recursion thus:
\[ h(a) =
\begin{cases}
1 & \text{if $a$ is $\leq$-comparable with every $b \prec a$ such that $h(b) = 1$} \\
0 & \text{otherwise}
\end{cases} \]}}
\step{4}{\pflet{$B = \{x \in A : h(x) = 1\}$} \prove{$B$ is a maximal subset linearly ordered by $\leq$.}}
\step{5}{$B$ is linearly ordered by $\leq$.}
\begin{proof}
	\step{a}{\pflet{$x,y \in B$}}
	\step{b}{\assume{w.l.o.g. $x \preccurlyeq y$}}
	\step{c}{$y$ is $\leq$-comparable with $x$}
\end{proof}
\step{6}{For any subset $C \subseteq A$ linearly ordered by $\leq$, if $B \subseteq C$ then $B = C$.}
\begin{proof}
	\step{a}{\pflet{$x \in C$}}
	\step{b}{$x$ is comparable with every $y \preccurlyeq x$ such that $h(x) = 1$}
	\step{c}{$x \in B$}
\end{proof}
\qed
\end{proof}

\begin{thm}[Zorn's Lemma]
Let $A$ be a poset.
If every linearly ordered subset of $A$ is bounded above, then $A$ has a maximal element.
\end{thm}

\begin{proof}
\pf
\step{1}{\pick\ a maximal linearly ordered subset $B$ of $A$.}
\begin{proof}
	\pf\ Maximal Principle
\end{proof}
\step{2}{\pick\ an upper bound $c$ for $B$. \prove{$c$ is maximal.}}
\step{3}{\pflet{$x \in A$}}
\step{4}{\assume{$c \leq x$} \prove{$x = c$}}
\step{5}{$x$ is an upper bound for $B$.}
\step{6}{$x \in B$}
\begin{proof}
	\pf\ By the maximality of $B$, since $B \cup \{x\}$ is linearly ordered.
\end{proof}
\step{7}{$x \leq c$}
\begin{proof}
	\pf\ \stepref{2}
\end{proof}
\step{8}{$x = c$}
\qed
\end{proof}

\begin{cor}[Kuratowski's Lemma]
Let $\mathcal{A} \subseteq \mathcal{P} X$. Suppose that, for every subset $\mathcal{B} \subseteq \mathcal{A}$ that is linearly ordered by inclusion, we have $\bigcup \mathcal{B} \in \mathcal{A}$. Then $\mathcal{A}$ has a maximal element.
\end{cor}

\begin{df}[Closed Interval]
Let $X$ be a linearly ordered set. Let $a,b \in X$ with $a < b$. The \emph{closed interval} $[a,b]$ is
\[ [a,b] := \{ x \in X : a \leq x \leq b \} \enspace . \]
\end{df}

\begin{df}[Half-Open Interval]
Let $X$ be a linearly ordered set. Let $a,b \in X$ with $a < b$. The \emph{half-open intervals} $(a,b]$ and $[a,b)$ are defined by
\begin{align*}
(a,b] & := \{ x \in X : a < x \leq b \} \\
[a,b) & := \{ x \in X : a \leq x < b \}
\end{align*}
\end{df}

\begin{df}[Open Ray]
Let $X$ be a linearly ordered set and $a \in X$. The \emph{open rays} $(a, +\infty)$ and $(-\infty, a)$ are defined by:
\begin{align*}
(a, +\infty) & := \{ x \in X : a < x \} \\
(-\infty, a) & := \{ x \in X : x < a \}
\end{align*}
\end{df}

\begin{df}[Closed Ray]
Let $X$ be a linearly ordered set and $a \in X$. The \emph{closed rays} $[a, +\infty)$ and $(-\infty, a]$ are defined by:
\begin{align*}
[a, +\infty) & := \{ x \in X : a \leq x \} \\
(-\infty, a] & := \{ x \in X : x \leq a \}
\end{align*}
\end{df}

\begin{df}[Convex]
Let $X$ be a linearly ordered set and $Y \subseteq X$. Then $Y$ is \emph{convex} iff, for all $a,b \in Y$ and $c \in X$, if $a < c < b$ then $c \in Y$.
\end{df}

\subsection{Sets of Finite Type}

\begin{df}[Finite Type]
Let $X$ be a set. Let $\mathcal{A} \subseteq \mathcal{P} X$. Then $\mathcal{A}$ is of \emph{finite type} if and only if, for any $B \subseteq X$, we have $B \in \mathcal{A}$ if and only if every finite subset of $B$ is in $\mathcal{A}$.
\end{df}

\begin{prop}[Tukey's Lemma]
Let $X$ be a set. Let $\mathcal{A} \subseteq \mathcal{P} X$. If $\mathcal{A}$ is of finite type, then $\mathcal{A}$ has a maximal element.
\end{prop}

\begin{proof}
\pf
\step{1}{For every subset $\mathcal{B} \subseteq \mathcal{A}$ that is linearly ordered by inclusion, we have $\bigcup \mathcal{B} \in \mathcal{A}$.}
\begin{proof}
	\step{a}{\pflet{$\mathcal{B} \subseteq \mathcal{A}$}}
	\step{b}{\assume{$\mathcal{B}$ is linearly ordered by inclusion.}}
	\step{c}{Every finite subset of $\bigcup \mathcal{B}$ is in $\mathcal{A}$}
	\step{d}{$\bigcup \mathcal{B} \in \mathcal{A}$}
\end{proof}
\qedstep
\begin{proof}
	\pf\ Kuratowski's Lemma.
\end{proof}
\qed
\end{proof}

\section{Linear Continuua}

\begin{df}[Linear Continuum]
A \emph{linear continuum} is a linearly ordered set with more than one element that is dense and has the least upper bound property.
\end{df}

\begin{prop}
Every convex subset of a linear continuum with more than one element is a linear continuum.
\end{prop}

\begin{proof}
\pf\ Easy. \qed
\end{proof}

\begin{cor}
Every interval and ray in a linear continuum is a linear continuum.
\end{cor}

\section{Well Orders}

\begin{df}[Well Ordered Set]
A \emph{well ordered set} is a linearly ordered set such that every nonempty subset has a least element.
\end{df}

\begin{prop}
Any subset of a well ordered set is well ordered.
\end{prop}

\begin{prop}
The product of two well ordered sets is well ordered under the dictionary order.
\end{prop}

\begin{thm}[Well Ordering Theorem]
Every set has a well ordering.
\end{thm}

\begin{proof}
\pf
\step{1}{\pflet{$X$ be a set.}}
\step{2}{\pick\ a choice function $c : \mathcal{P} X - \{ \emptyset \} \rightarrow X$}
\step{3}{Define a \emph{tower} to be a pair $(T,<)$ where $T \subseteq X$, $<$ is a well ordering of $T$, and
\[ \forall x \in T. x = c(X - \{ y \in T : y < x \}) \enspace . \]}
\step{4}{Given two towers, either they are equal or one is a section of the other.}
\begin{proof}
	\step{a}{\pflet{$(T_1,<_1)$ and $(T_2,<_2)$ be towers.}}
	\step{b}{\assume{w.l.o.g. there exists a strictly monotone function $h : T_1 \rightarrow T_2$}}
	\step{c}{$h(T_1)$ is either $T_2$ or a section of $T_2$}
	\begin{proof}
		\pf\ Proposition \ref{prop:order_preserving_maps}.
	\end{proof}
	\step{d}{$\forall x \in T_1. h(x) = x$}
	\begin{proof}
		\step{i}{\pflet{$x \in T_1$}}
		\step{ii}{\assume{as transfinite induction hypothesis $\forall y < x. h(y) = y$}}
		\step{iii}{$h(x)$ is the least element of $T_2 - \{ h(y) \in T_1 : y < x \}$}
		\step{iv}{$h(x)$ is the least element of $T_2 - \{ y \in T_1 : y < x \}$}
		\begin{proof}
			\pf\ \stepref{ii}
		\end{proof}
		\step{v}{$h(x) = x$}
		\begin{proof}
			\pf
			\begin{align*}
				h(x) & = c(X - \{y \in T_2 : y < h(x)\}) & (\text{\stepref{3}}) \\
				& = c(X - \{y \in T_2 : y < x \}) & (\text{\stepref{iv}}) \\
				& = c(X - \{ y \in T_1 : y < x \}) & (\text{\stepref{ii}}) \\
				& = x & (\text{\stepref{3}})
			\end{align*}
		\end{proof}
	\end{proof}
\end{proof}
\step{5}{If $(T,<)$ is a tower and $T \neq X$, then there exists a tower of which $(T,<)$ is a section.}
\begin{proof}
	\pf\ Let $T_1 = T \cup \{c(T)\}$ and $<_1$ be the extension of $<$ such that $x < c(T)$ for all $x \in T$.
\end{proof}
\step{6}{\pflet{$\mathbf{T} = \bigcup \{ T : \exists R. (T,R) \text{ is a tower} \}$ and $\mathbf{R} = \bigcup \{ R : \exists T. (T,R) \text{ is a tower} \}$}}
\step{7}{$(\mathbf{T},\mathbf{R})$ is a tower.}
\begin{proof}
	\step{a}{$\mathbf{R}$ is irreflexive.}
	\begin{proof}
		\pf\ Since for every tower $(T,<)$ we have $<$ is irreflexive.
	\end{proof}
	\step{b}{$\mathbf{R}$ is transitive.}
	\begin{proof}
		\step{i}{\assume{$x \mathbf{R} y$ and $y \mathbf{R} z$}}
		\step{ii}{\pick\ towers $(T_1,<_1)$ and $(T_2,<_2)$ such that $x <_1 y$ and $y <_2 z$}
		\step{iii}{\assume{w.l.o.g. $(T_1,<_1)$ is either $(T_2,<_2)$ or a section of $(T_2,<_2)$}}
		\step{iv}{$x <_2 y <_2 z$}
		\step{v}{$x <_2 z$}
		\step{vi}{$x \mathbf{R} z$}
	\end{proof}
	\step{c}{For all $x,y \in \mathbf{T}$, either $x\mathbf{R}y$ or $x= y$ or $y\mathbf{R}x$}
	\begin{proof}
		\pf\ There exists a tower that has both $x$ and $y$.
	\end{proof}
	\step{d}{Every nonempty subset of $\mathbf{T}$ has an $\mathbf{R}$-least element.}
	\begin{proof}
		\step{i}{\pflet{$A \subseteq \mathbf{T}$ be nonempty.}}
		\step{ii}{\pick\ $a \in A$}
		\step{iii}{\pick\ a tower $(T,<)$ such that $a \in T$.}
		\step{iv}{\pflet{$b$ be the $<$-least element of $A \cap T$} \prove{$b$ is $\mathbf{R}$-least in $A$.}}
		\step{vi}{\pflet{$x \in A$}}
		\step{vii}{Etc.}
	\end{proof}
	\step{e}{$\forall x \in \mathbf{T}. x = c(X - \{y \in \mathbf{T} : y\mathbf{R}x \})$}
\end{proof}
\step{8}{$\mathbf{T} = X$}
\step{9}{$\mathbf{R}$ is a well ordering of $X$.}
\qed
\end{proof}

\begin{prop}
There exists a well-ordered set with a largest element $\Omega$ such that $(-\infty, \Omega)$ is uncountable but, for all $\alpha < \Omega$, we have $(-\infty, \alpha)$ is countable.
\end{prop}

\begin{proof}
\pf
\step{1}{\pick\ an uncountable well ordered set $B$.}
\step{2}{\pflet{$C = 2 \times B$ under the dictionary order.}}
\step{3}{\pflet{$\Omega$ be the least element of $C$ such that $(-\infty, \Omega)$ is uncountable.}}
\step{4}{\pflet{$A = (-\infty, \Omega]$}}
\step{5}{$A$ is a well ordered set with largest element $\Omega$ such that $(-\infty, \Omega)$ is uncountable but, for all $\alpha < \Omega$, we have $(-\infty, \alpha)$ is countable.}
\qed
\end{proof}

\begin{prop}
Every well ordered set has the least upper bound property.
\end{prop}

\begin{proof}
\pf\ For any subset that is bounded above, the set of upper bounds is nonempty, hence has a least element. \qed
\end{proof}

\begin{prop}
In a well ordered set, every element that is not greatest has a successor.
\end{prop}

\begin{proof}
\pf\ If $a$ is not greatest, then $\{ x : x > a \}$ is nonempty, hence has a least element. \qed
\end{proof}

\begin{thm}[Transfinite Induction]
Let $J$ be a well ordered set. Let $S \subseteq J$. Assume that, for every $\alpha \in J$, if $\forall x < \alpha. x \in S$ then $\alpha in S$. Then $S = J$.
\end{thm}

\begin{proof}
\pf\ Otherwise $J - S$ would be a nonempty subset of $J$ with no least element. \qed
\end{proof}

\begin{prop}
Let $I$ be a well ordered set. Let $\{A_i\}_{i \in I}$ be a family of well ordered sets. Define $<$ on $\coprod_{i \in I} A_i$ by: $\kappa_i(a) < \kappa_j(b)$ iff either $i < j$, or $i = j$ and $a < b$ in $A_i$. Then $<$ well orders $\coprod_{i \in I} A_i$.
\end{prop}

\begin{proof}
\pf\ Easy. \qed
\end{proof}

\begin{thm}[Principle of Transfinite Recursion]
Let $J$ be a well ordered set. Let $C$ be a set. Let $\mathcal{F}$ be the set of all functions from a section of $J$ into $C$. Let $\rho : \mathcal{F} \rightarrow C$. Then there exists a unique function $h : J \rightarrow C$ such that, for all $\alpha \in J$, we have
\[ h(\alpha) = \rho(h \restriction (-\infty, \alpha)) \enspace . \]
\end{thm}

\begin{proof}
\pf
\step{1}{For a function $h$ mapping either a section of $J$ or all of $J$ into $C$, let us say $h$ is \emph{acceptable} iff, for all $x \in \dom h$, we have $(-\infty, x) \subseteq \dom h$ and $h(x) = \rho(h \restriction (-\infty, x))$.}
\step{1}{If $h$ and $k$ are acceptable functions then $h(x) = k(x)$ for all $x$ in both domains.}
\begin{proof}
	\step{a}{\pflet{$x \in J$}}
	\step{b}{\assume{as transfinite induction hypothesis that, for all $y < x$ and any acceptable functions $h$ and $k$ with $y \in \dom h \cap \dom k$, we have $h(y) = k(y)$}}
	\step{c}{\pflet{$h$ and $k$ be acceptable functions with $x \in \dom h \cap \dom k$}}
	\step{d}{$h \restriction (-\infty, x) = k \restriction (-\infty, x)$}
	\begin{proof}
		\pf\ By \stepref{b}.
	\end{proof}
	\step{d}{$h(x) = k(x)$}
	\begin{proof}
		\pf\ By \stepref{c}, each is the least element of the set in \stepref{d}.
	\end{proof}
\end{proof}
\step{2}{For $\alpha \in J$, if there exists an acceptable function $(- \infty, \alpha) \rightarrow C$, then there exists an acceptable function $(-\infty, \alpha] \rightarrow C$.}
\begin{proof}
	\step{a}{\pflet{$\alpha \in J$}}
	\step{b}{\pflet{$f : (-\infty, \alpha) \rightarrow C$ be acceptable.}}
	\step{c}{\pflet{$g : (-\infty, \alpha] \rightarrow C$ be the function given by
	\[ g(x) = 
	\begin{cases}
	f(x) & \text{if } x < \alpha \\
	\rho(f) & \text{if } x = \alpha
	\end{cases} \]}}
	\step{d}{$g$ is acceptable.}
\end{proof}
\step{3}{Let $K \subseteq J$. Assume that, for all $\alpha \in K$, there exists an acceptable function $(-\infty, \alpha) \rightarrow C$. Then there exists an acceptable function $\bigcup_{\alpha \in K} (-\infty, \alpha) \rightarrow C$.}
\begin{proof}
	\step{a}{Define $f : \bigcup_{\alpha \in K} (-\infty, \alpha) \rightarrow C$ by: $f(x) = y$ iff there exists $\alpha \in K$ and $g : (-\infty, \alpha) \rightarrow C$ acceptable such that $g(x) = y$.}
\end{proof}
\step{4}{For every $\beta \in J$, there exists an acceptable function $(-\infty, \beta) \rightarrow C$}
\begin{proof}
	\step{a}{\pflet{$\beta \in J$}}
	\step{b}{\assume{as transfinite induction hypothesis that, for all $\alpha < \beta$, there exists an acceptable function $(-\infty, \alpha) \rightarrow C$}}
	\step{c}{\case{$\beta$ has a predecessor}}
	\begin{proof}
		\step{i}{\pflet{$\alpha$ be the predecessor of $\beta$.}}
		\step{ii}{There exists an acceptable function $(-\infty, \alpha) \rightarrow C$.}
		\step{iii}{There exists an acceptable function $(-\infty, \beta) \rightarrow C$.}
		\begin{proof}
			\pf\ By \stepref{2} since $(-\infty, \beta) = (-\infty, \alpha]$.
		\end{proof}
	\end{proof}
	\step{d}{\case{$\beta$ has no predecessor.}}
	\begin{proof}
		\pf\ The result follows by \stepref{3} since $(-\infty, \beta) = \bigcup_{\alpha < \beta} (-\infty, \alpha)$.
	\end{proof}
\end{proof}
\step{5}{There exists an acceptable function $J \rightarrow C$.}
\begin{proof}
	\step{a}{\case{$J$ has a greatest element.}}
	\begin{proof}
		\step{i}{\pflet{$g$ be greatest.}}
		\step{ii}{There exists an acceptable function $(-\infty, g) \rightarrow C$.}
		\begin{proof}
			\pf\ \stepref{4}
		\end{proof}
		\step{iii}{There exists an acceptable function $J \rightarrow C$.}
		\begin{proof}
			\pf\ By \stepref{2} since $J = (-\infty, g]$.
		\end{proof}
	\end{proof}
	\step{b}{\case{$J$ has no greatest element.}}
	\begin{proof}
		\pf\ By \stepref{3} since $J = \bigcup_{\alpha \in J} (-\infty, \alpha)$.
	\end{proof}
\end{proof}
\qed
\end{proof}

\begin{cor}[Cardinal Comparability]
Let $A$ and $B$ be sets. Then either $A \preccurlyeq B$ or $B \preccurlyeq A$.
\end{cor}

\begin{proof}
\pf\ Choose well orderings of $A$ and $B$. Then either there exists a surjection $A \twoheadrightarrow B$, or there exists an injective function $h : A \rightarrowtail B$ defined by transfinite recursion by $h(x)$ is the least element of $B - h((-\infty, x))$. \qed
\end{proof}

\begin{prop}
\label{prop:order_preserving_maps}
Let $J$ and $E$ be well ordered sets. Let $h : J \rightarrow E$. Then the following are equivalent.
\begin{enumerate}
\item $h$ is strictly monotone and $h(J)$ is either $E$ or a section of $E$.
\item For all $\alpha \in J$, we have $h(\alpha)$ is the least element of $E - h((-\infty, \alpha))$.
\end{enumerate}
\end{prop}

\begin{proof}
\pf
\step{1}{$1 \Rightarrow 2$}
\begin{proof}
	\step{a}{\assume{1}}
	\step{b}{$h(J)$ is closed downwards.}
	\step{c}{\pflet{$\alpha \in J$}}
	\step{d}{$h(\alpha) \in E - h((-\infty, \alpha))$}
	\begin{proof}
		\pf\ If $\beta < \alpha$ then $h(\beta) < h(\alpha)$.
	\end{proof}
	\step{e}{For all $y \in E - h((-\infty, \alpha))$ we have $h(\alpha) \leq y$}
	\begin{proof}
		\step{i}{\assume{for a contradiction $y < h(\alpha)$}}
		\step{ii}{$y \in h(J)$}
		\step{iii}{\pick\ $\beta \in J$ such that $h(\beta) = y$}
		\step{iv}{$h(\beta) < h(\alpha)$}
		\step{v}{$\beta < \alpha$}
		\qedstep
		\begin{proof}
			\pf\ This contradicts the fact that $y \notin h((-\infty, \alpha))$.
		\end{proof}
	\end{proof}
\end{proof}
\step{2}{$2 \Rightarrow 1$}
\begin{proof}
	\step{a}{\assume{2}}
	\step{b}{$h$ is strictly monotone.}
	\begin{proof}
		\step{i}{\pflet{$\alpha, \beta \in J$ with $\alpha < \beta$}}
		\step{ii}{$h(\alpha) \neq h(\beta)$}
		\begin{proof}
			\pf\ Because $h(\beta) \in E - h((-\infty, \beta))$.
		\end{proof}
		\step{iii}{$h(\alpha) \leq h(\beta)$}
		\begin{proof}
			\pf Because $h(\alpha)$ is least in $E - h((-\infty, \alpha))$.
		\end{proof}
		\step{iv}{$h(\alpha) < h(\beta)$}
	\end{proof}
	\step{c}{$h(J)$ is either $E$ or a section of $E$.}
	\begin{proof}
		\step{i}{\assume{$h(J) \neq E$}}
		\step{ii}{\pflet{$e$ be least in $E - h(J)$} \prove{$h(J) = (-\infty, e)$}}
		\step{iii}{$h(J) \subseteq (-\infty, e)$}
		\begin{proof}
			\step{one}{\pflet{$\alpha \in J$}}
			\step{two}{$h(\alpha) \neq e$}
			\begin{proof}
				\pf\ $e \notin h(J)$
			\end{proof}
			\step{three}{$h(\alpha) \leq e$}
			\begin{proof}
				\pf\ Since $h(\alpha)$ is least in $E - h((-\infty, \alpha))$.
			\end{proof}
			\step{four}{$h(\alpha) < e$}
		\end{proof}
		\step{iv}{$(-\infty, e) \subseteq h(J)$}
		\begin{proof}
			\pf\ If $e' < e$ then $e' \in h(J)$ by leastness of $e$.
		\end{proof}
	\end{proof}
\end{proof}
\qed
\end{proof}
